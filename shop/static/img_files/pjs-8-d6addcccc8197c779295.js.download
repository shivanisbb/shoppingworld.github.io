(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[8],{AlW1:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var o=n("GyhR"),r=n.n(o),a=n("Ivf5"),i=n("D+W/"),c=n("Qo1m"),l=n("kIql"),s=n("evwu"),u=n("j/DJ"),d=(n("Irlq"),n("7Iyi")),p=n("9Y9K"),f=n("ovu7");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){S(e,t,n[t])})}return e}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t,n;return n=t=function(t){function n(){var e,t,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return o=this,r=(e=v(n)).call.apply(e,[this].concat(l)),t=!r||"object"!==h(r)&&"function"!=typeof r?_(o):r,S(_(_(t)),"state",{createBoardError:null,inputName:t.props.prefilledName||"",nameValidators:[Object(f.q)({message:c.a._("Don't forget to name your board!")}),Object(f.k)({max:i.a.MAX_CHARS_FOR_BOARD_TITLE})],nameValidatorErrors:[],privacy:t.props.isAdAccountOwner?i.a.BoardPrivacy.PUBLIC:i.a.BoardPrivacy.PROTECTED,saving:!1}),S(_(_(t)),"handleChangeName",function(e,n){var o=Object(f.t)(t.state.nameValidators,e);t.setState({inputName:e,nameValidatorErrors:o,createBoardError:null},function(){n&&t.handleCreate()})}),S(_(_(t)),"handleChangePrivacy",function(){var e=t.state.privacy===i.a.BoardPrivacy.SECRET?i.a.BoardPrivacy.PUBLIC:i.a.BoardPrivacy.SECRET;t.setState({privacy:e})}),S(_(_(t)),"handleCreate",function(){var e=t.state,n=e.inputName,o=e.privacy,r=t.props,a=r.createBoard,i=r.invalidateResource,l=r.onCreate,s=r.isAdAccountOwner,u=r.advertiser_id,d=b({privacy:o,name:n},!s&&u?{advertiser_id:u}:{});t.setState({saving:!0,createBoardError:null}),a(d).then(function(e){t.setState({saving:!1}),l(e)}).catch(function(e){var n=c.a._("Uh oh! Something went wrong.");if(e.message){var o=e.message,r=e.message_detail;n=r?"".concat(o," ").concat(r):o}else"string"==typeof e&&(n=e);t.setState({saving:!1,createBoardError:n})}),i(o)}),t}var a,l,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,o["Component"]),a=n,(l=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.prefilledName&&this.setState({inputName:e.prefilledName})}},{key:"render",value:function(){var t=this.props,n=(t.createBoard,t.invalidateResource,m(t,["createBoard","invalidateResource"]));return r.a.createElement(e,Object.assign({onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,onBoardCreate:this.handleCreate},n,this.state))}}])&&y(a.prototype,l),s&&y(a,s),n}(),S(t,"displayName","WithBoardCreatePane(".concat(e.displayName||e.name,")")),n}function E(e){var t=e.advertiser,n=e.viewer,o=!t||n.isAuth&&t.owner_user_id===n.id,r=t&&t.id;return b({isAdAccountOwner:o},r?{advertiser_id:r}:{})}function O(e,t){return{invalidateResource:function(n){e(Object(d.f)("BoardsResource",Object(u.a)(t.viewer.username,n===i.a.BoardPrivacy.SECRET)))},createBoard:function(t){return e(Object(s.e)(t))}}}function C(e){return Object(p.compose)(l.a,Object(a.connect)(E,O),w)(e)}},FIpZ:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),a=(n("rWj7"),n("Qo1m")),i=n("HcVA"),c=n("g4pz"),l=n("+U6O"),s=function(e){var t=e.link,n=e.grayscale,o=e.handleClick,s=e.handleFocus;return r.a.createElement("div",{className:"ShareLink"},r.a.createElement("div",{className:"link"},r.a.createElement("div",{className:"icon"},r.a.createElement(c.a,{size:30,grayscale:n})),r.a.createElement(i.a,{ref:function(e){return e&&e.focus()},className:"Input linkField",value:t,onFocus:s}),r.a.createElement("div",{className:"cancelLink",onClick:o},r.a.createElement(l.n,{accessibilityLabel:a.a._("Close","close copy link"),icon:"cancel",color:"gray"}))))};s.defaultProps={grayscale:!1},t.a=s},HcVA:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n("GyhR"),r=n.n(o);n("hvnN");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(e){function t(e,n){var o,r,i,l,u,d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=c(t).call(this,e,n),o=!i||"object"!==a(i)&&"function"!=typeof i?s(r):i,l=s(s(o)),d=function(e){o.props.onChange&&o.props.onChange(e.target.value),o.setState({value:e.target.value,hasChanged:!0})},(u="handleChange")in l?Object.defineProperty(l,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[u]=d,o.state={isFocused:o.props.focused||!1,value:o.props.value,hasChanged:void 0!==o.props.value},o}var n,u,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o["Component"]),n=t,(u=[{key:"componentDidMount",value:function(){this.state.isFocused&&this._input.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"getId",value:function(){return this.props.id}},{key:"getValue",value:function(){return this.state.value}},{key:"focus",value:function(){this._input.focus()}},{key:"render",value:function(){var e=this;return r.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:function(t){e._input=t},style:this.props.style,type:this.props.type,value:this.state.value||""})}}])&&i(n.prototype,u),d&&i(n,d),t}();u.defaultProps={type:"text"}},JXQe:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),a=n("Qo1m"),i=(n("hvnN"),n("vBbO")),c=n("SMmS"),l=n("VSY/"),s=n("+U6O");function u(e){var t=e.body,n=e.img,r=e.onClick,i=e.selected,c=e.title,l=e.username,u=e.valid,d=l||t;return o.createElement(s.b,{marginBottom:4},o.createElement(s.P,{onTouch:r},o.createElement(s.b,{display:"flex",alignItems:"center",direction:"row",width:"100%"},n,o.createElement(s.b,{marginLeft:3,flex:"grow",marginRight:2},o.createElement(s.b,{marginBottom:1},o.createElement(s.K,{bold:!0,size:"md",truncate:!0},c)),o.createElement(s.K,{size:"xs",truncate:!0},d)),o.createElement(s.b,{marginLeft:2},function(e,t){if(l)return e?o.createElement(s.n,{icon:"check-circle",color:"red",accessibilityLabel:a.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites"),size:32}):o.createElement(s.b,{height:32,width:32,shape:"circle",dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}}});var n={text:a.a._("Sent","Sent a board collaborator invite"),color:"gray",size:"sm",disabled:!0,inline:!0};return e||(n.text=a.a._("Invite","Add board collaborator invite"),n.disabled=Boolean(!t)),o.createElement(s.c,n)}(i,u)))))}var d=n("0Wmr");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n){var o=e.id;return t===n.findIndex(function(e){return e.id===o})}var g=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=h(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==p(r)&&"function"!=typeof r?b(o):r,y(b(b(n)),"state",{selectedCollaborators:[],showCollabList:!1,showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""}),y(b(b(n)),"handleTextFieldChange",function(e){var t=e.value;n.setState({value:t})}),y(b(b(n)),"handleCollaboratorClick",function(e){var t=e.id,o=e.type;n.isIdSelected[t]=!n.isIdSelected[t];var r=n.state.selectedCollaborators.concat([e]),a="email"===o?d.c:d.d;n.props.onSelectedCollaboratorsChange({id:t,resource:a}),n.setState({selectedCollaborators:r})}),y(b(b(n)),"handleTypeaheadSuggestionsChange",function(e){n.setState({typeaheadSuggestions:e})}),y(b(b(n)),"handleToggleCollabList",function(){n.setState(function(e){return{showCollabList:!e.showCollabList}})}),y(b(b(n)),"isIdSelected",{}),n}var n,c,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),n=t,(c=[{key:"render",value:function(){var e=this,t=this.state,n=t.value,c=t.showCollabList,d=this.props.inCollabInBoardCreateExperiment,p=(""===n?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:n,valid:Object(l.g)(n)}).concat(this.props.shareSuggestions).filter(v)).map(function(t,n){return function(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){var r=o.createElement(s.a,{name:e.title||e.full_name,src:e.image_medium_url,size:"md"});return o.createElement(u,{img:r,onClick:function(){return n(e)},selected:t,title:e.full_name,username:e.username})}if("email"===e.type){var i,c,d=e.id,p=e.valid,f=o.createElement(s.b,{shape:"circle",color:"lightGray",height:40,width:40,display:"flex",justifyContent:"center",alignItems:"center"},o.createElement(s.n,{color:"darkGray",icon:"envelope",size:20,accessibilityLabel:a.a._("Email icon","Email icon on board create modal")})),h=Object(l.c)(a.a._("Email {{ email }}"),{email:d});return t?(i=a.a._("Done!","Text that lets the user know we sent the board invite email"),c=function(){}):(i=p?a.a._("Click to send!","Text that lets the user know they can successfully send a board invite email"):a.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet"),c=function(){return p?n(e):void 0}),o.createElement(u,{body:i,img:f,onClick:c,selected:t,title:h,valid:p})}}(t,e.isIdSelected[t.id],e.handleCollaboratorClick)}).map(function(e,t){return r.a.createElement("li",{key:t},e)}),f=d?r.a.createElement(s.P,{onTouch:this.handleToggleCollabList},r.a.createElement(s.d,null,r.a.createElement(s.b,{display:"flex",alignItems:"center",justifyContent:"between",paddingX:3,marginTop:3,marignBottom:1,paddingY:3},r.a.createElement(s.K,{size:"md"},a.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create")),r.a.createElement(s.n,{accessibilityLabel:"",icon:c?"arrow-down":"arrow-forward"})))):r.a.createElement(s.b,{paddingX:3,marginBottom:4,marginTop:3,paddingY:3},r.a.createElement(s.K,{size:"md"},a.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create")));return r.a.createElement(s.b,{display:"flex",direction:"column",height:"100%"},f,(d&&c||!d)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{paddingX:3,marginTop:2,marginBottom:4,width:"100%"},r.a.createElement(s.b,{flex:"grow"},r.a.createElement(i.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:n},r.a.createElement(s.D,{id:"CollaboratorInviteSearchField",accessibilityLabel:a.a._("Search for collaborators by name or email"),onChange:this.handleTextFieldChange,placeholder:a.a._("Search by name or email"),value:n})))),r.a.createElement(s.b,{paddingX:3,overflow:"scrollY"},r.a.createElement("ul",null,p))))}}])&&f(n.prototype,c),g&&f(n,g),t}();y(g,"defaultProps",{shareSuggestions:[]});t.a=Object(c.b)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(g)},Kqiz:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),a=n("Ivf5"),i=n("D+W/"),c=n("Qo1m"),l=n("Reqc"),s=n("AlW1"),u=n("9Y9K"),d=n("UmN8"),p=n("JXQe"),f=n("kIql"),h=n("+U6O");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=function(e){function t(){var e,n,o,r,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return o=this,r=(e=y(t)).call.apply(e,[this].concat(s)),n=!r||"object"!==m(r)&&"function"!=typeof r?g(o):r,a=g(g(n)),c=function(e){e.preventDefault(),n.props.onBoardCreate()},(i="handleBoardCreateFormSubmit")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.createBoardError,n=e.inputName,o=e.nameValidatorErrors,a=e.onCancel,s=e.onChangeBoardName,u=e.onChangeBoardPrivacy,f=e.onInvite,m=e.privacy,b=e.saving,y=e.showTitle,v=e.isAdAccountOwner,g=e.viewer,_=0===o.length,S=m===i.a.BoardPrivacy.SECRET,w=g.isAuth&&0===g.boardCount;return r.a.createElement(h.b,{color:"white",height:"100%",position:"absolute",width:"100%",top:!0,left:!0},r.a.createElement("form",{onSubmit:this.handleBoardCreateFormSubmit,style:{height:"100%"}},r.a.createElement(h.b,{direction:"column",display:"flex",height:"100%"},y&&r.a.createElement(h.b,{display:"flex",marginTop:3,paddingX:6,paddingY:3},r.a.createElement(h.K,{size:"xl",bold:!0},c.a._("Create board"))),r.a.createElement(h.b,{padding:3},r.a.createElement(h.b,{marginBottom:2},r.a.createElement(h.q,{htmlFor:"boardEditName"},r.a.createElement(h.K,null,c.a._("Name")))),r.a.createElement(h.b,null,r.a.createElement(h.M,{errorMessage:o.join(", "),id:"boardEditName",name:"boardName",onChange:function(e){var t=e.value;return s(t)},placeholder:c.a._('Like "Places to Go" or "Recipes to Make"'),value:n}))),r.a.createElement(h.j,null),v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{padding:3},r.a.createElement(h.b,{marginBottom:2},r.a.createElement(h.q,{htmlFor:"secret"},r.a.createElement(h.K,null,c.a._("Secret","secret board")))),r.a.createElement(h.b,null,r.a.createElement(h.I,{onChange:u,id:"secret",switched:S}))),r.a.createElement(h.j,null),r.a.createElement(h.b,{display:"flex",flex:"grow",overflow:"hidden"},r.a.createElement(h.b,{width:"100%"},r.a.createElement(d.a,{name:"web_collaborators_in_board_create_v3",isEligible:w},function(e){var t=e.anyEnabled;return r.a.createElement(p.a,{onSelectedCollaboratorsChange:f,inCollabInBoardCreateExperiment:t})}))),r.a.createElement(h.j,null)),!v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{padding:3},r.a.createElement(h.b,{marginBottom:2},r.a.createElement(h.q,{htmlFor:"protected"},r.a.createElement(h.K,null,c.a._("Protected board (not listed on user's profile)","protected board")))),r.a.createElement(h.b,null,r.a.createElement(h.I,{onChange:function(){},id:"protected",switched:!0,disabled:!0}))),r.a.createElement(h.j,null)),r.a.createElement(h.b,{padding:6},!!t&&r.a.createElement(h.b,{marginBottom:3},r.a.createElement(h.K,{align:"center",bold:!0,color:"red",size:"sm"},t)),r.a.createElement(h.b,{display:"flex",justifyContent:"between"},r.a.createElement(h.c,{inline:!0,onClick:a,text:c.a._("Cancel","cancel board create")}),r.a.createElement(l.a,{disabled:!n.trim()||!_||!!t||b,submitting:b,text:c.a._("Create","create a new board")}))))))}}])&&b(n.prototype,a),s&&b(n,s),t}(),S=Object(u.compose)(f.a,s.a)(_),w=n("vBjq"),E=n("Y2BC"),O=n("OUI7"),C=n("cSL5");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var I=function(e){function t(){var e,n,o,r,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return o=this,r=(e=P(t)).call.apply(e,[this].concat(s)),n=!r||"object"!==j(r)&&"function"!=typeof r?x(o):r,a=x(x(n)),c=function(e){var t=n.props,o=t.board,r=t.sectionsResource.data;return e.length>=C.a?[{items:Object(O.a)([o],e),customProps:{inSectionSelection:!0}},{items:Object(O.a)(r,e,"title")}]:[{items:[o],customProps:{inSectionSelection:!0}},{items:r}]},(i="getSections")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.sectionsResource,n=t.error,o=t.isLoaded,a=e.boardSavedTo,i=e.isSelectMode,l=e.onSectionCreate,s=e.onSectionSelected,u=e.pinId;return r.a.createElement(C.b,{isSelectMode:i,boardSavedTo:a,createButtonLabel:c.a._("Add section","Button for creating a board section"),hasLoadError:!!n,isLoaded:o,getSections:this.getSections,onCreate:l,onSelected:s,pinId:u})}}])&&k(n.prototype,a),i&&k(n,i),t}(),R=Object(E.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:function(e){return{board_id:e.board.id}}})(I),B=n("7Iyi");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=2,U=3,H=void 0,W=function(e){var t=[],n=[];return e.forEach(function(e){e.name.match(/^\d/)?n.push(e):t.push(e)}),t.concat(n)};function z(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){M(e,t,n[t])})}return e}({},e?{pin_id:e}:{},t?{username:t}:{},n?{advertiser_id:n,filter:"protected"}:{},{field_set_key:"board_picker",limit:H,shortlist_suggestions:K})}var G=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=this,r=(e=D(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==A(r)&&"function"!=typeof r?N(o):r,M(N(N(n)),"getSections",function(e){var t=n.props.boardResource.data;if(!t)return[];var o=t.all_boards,r=t.boards_shortlist,a=W(o);return a.length<=U?[{items:a}]:e.length>=C.a?[{items:Object(O.a)(a,e)}]:[r.length?{items:r,title:c.a._("Top choices")}:{items:[]},{items:a,title:c.a._("All boards","title for board picker all boards section")}]}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.boardResource,n=t.data,o=t.error,a=t.isLoaded,i=e.boardSavedTo,c=e.isSelectMode,l=e.onBoardCreate,s=e.onBoardSelected,u=e.pinId,d=a&&!!n&&n.all_boards.length<=U;return r.a.createElement(C.b,{isSelectMode:c,boardSavedTo:i,hasLoadError:!!o,hasLowBoardCount:d,isLoaded:a,getSections:this.getSections,onCreate:l,onSelected:s,pinId:u})}}])&&L(n.prototype,a),i&&L(n,i),t}();var Y=Object(u.compose)(Object(a.connect)(function(e){var t=e.advertiser,n=e.viewer;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}}),Object(E.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function(e){return z(e.pinId,e.username,e.advertiser_id)}}))(G),q=n("2Npu");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=this,r=(e=X(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==V(r)&&"function"!=typeof r?Z(o):r,$(Z(Z(n)),"state",{newName:"",selectedSectionBoard:n.props.boardWithSection||null,showCreate:n.props.showCreate||!1,inviteQueue:{}}),$(Z(Z(n)),"close",function(){var e=n.state,t=e.selectedSectionBoard,o=e.showCreate,r=n.props.onClose;o?n.setState({showCreate:!1},n.manageModalTitle):t?n.setState({selectedSectionBoard:null},n.manageModalTitle):r()}),$(Z(Z(n)),"sendInvites",function(e){var t=n.state.inviteQueue;Object.keys(t).forEach(function(n){t[n].resource(e.id,[n])})}),$(Z(Z(n)),"handleInvite",function(e){var t=n.state.inviteQueue;if(t[e.id]){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){$(e,t,n[t])})}return e}({},t);delete o[e.id],n.setState({inviteQueue:o})}else{var r=Object.assign({},t,$({},e.id,e));n.setState({inviteQueue:r})}}),$(Z(Z(n)),"handleBoardCreate",function(e){var t=n.props.onBoardCreated;n.handleBoardSave(e,!0),t&&t(e)}),$(Z(Z(n)),"handleBoardSave",function(e,t){var o=n.state.selectedSectionBoard,r=n.props,a=r.onBoardSave,i=r.invalidatePinBetterSaveResource;if((0,r.invalidateResource)(),i(),o&&"board_section"===e.type)return a(o,e,t);var c=e,l=c.section_count;!o&&(void 0===l?0:l)>0?n.setState({selectedSectionBoard:c},n.manageModalTitle):(n.sendInvites(e),a(c,void 0,t))}),$(Z(Z(n)),"handleCreate",function(e){return function(t){t=t||"",n.setState({newName:t,showCreate:!0},n.manageModalTitle);var o=e?13105:13025,r=e?10306:249;n.props.contextLog(101,{component:o,element:r})}}),$(Z(Z(n)),"manageModalTitle",function(){var e=n.props.setModalTitle,t=n.state,o=t.selectedSectionBoard,r=t.showCreate;e&&e(r&&o?c.a._("Add section","Repin title for making a board section"):r&&!o?c.a._("Create board","Repin title for making a new board"):o&&!r?c.a._("Choose section","Repin title for choosing a board section"):c.a._("Choose board","Repin title for choosing a board"))}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.boardSavedTo,n=e.isRepin,o=e.isSelectMode,a=e.pinId,i=e.setModalTitle,c=e.suggestedBoardTitle,l=this.state,s=l.newName,u=l.selectedSectionBoard,d=l.showCreate,p=!!u,f=!i;return r.a.createElement(h.b,{display:"flex",width:"100%",position:"relative"},r.a.createElement(h.b,{width:"100%",display:"flex",direction:"column",marginTop:4},u?r.a.createElement(R,{isSelectMode:o,board:u,boardSavedTo:t,onSectionCreate:this.handleCreate(p),onSectionSelected:this.handleBoardSave}):r.a.createElement(Y,{isSelectMode:o,boardSavedTo:t,onBoardCreate:this.handleCreate(p),onBoardSelected:this.handleBoardSave,pinId:a})),d&&!u&&r.a.createElement(S,{prefilledName:s||c,onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,showTitle:f}),d&&u&&r.a.createElement(w.a,{board:u,completeCreateSectionAction:this.handleBoardSave,initialName:s,isRepin:n,onClearModal:this.close,showTitle:f}))}}])&&Q(n.prototype,o),a&&Q(n,a),t}();var te=Object(u.compose)(q.a,Object(a.connect)(null,function(e,t){return{invalidateResource:function(){e(Object(B.f)("BoardPickerBoardsResource",z(t.pinId)))},invalidatePinBetterSaveResource:function(){e(Object(B.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))(ee),ne=n("iz36"),oe=n("UApa"),re=n("dsfX"),ae=n("RiVL"),ie=n("n/kK"),ce=n("TYRv"),le=n("aqOH"),se=n("SMmS");function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r=this,a=(e=pe(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==ue(a)&&"function"!=typeof a?he(r):a,me(he(he(n)),"state",{isFacebookChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.facebook_publish_stream_enabled,isTwitterChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.twitter_publish_enabled}),me(he(he(n)),"handleTwitterCheckboxChanged",function(){var e=!n.state.isTwitterChecked;n.setState({isTwitterChecked:e}),n.props.onSocialConnect(ce.default.TWITTER,e)}),me(he(he(n)),"handleFacebookCheckboxChanged",function(){var e=!n.state.isFacebookChecked;e?ie.a.maybeRequestFbTimelinePermission({success:function(){n.setState({isFacebookChecked:!0}),le.default.set("facebook_publish_stream_enabled",e),n.props.onSocialConnect(ce.default.FACEBOOK,e)},error:function(){n.setState({isFacebookChecked:!1}),le.default.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(ce.default.FACEBOOK,e)}}):(n.setState({isFacebookChecked:!1}),le.default.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(ce.default.FACEBOOK,e))}),me(he(he(n)),"renderFacebookShare",function(){return o.createElement(h.b,{display:"flex",alignItems:"center",marginLeft:2},o.createElement(h.e,{checked:n.state.isFacebookChecked,id:"share_facebook",onChange:n.handleFacebookCheckboxChanged,size:"sm"}),o.createElement(h.q,{htmlFor:"share_facebook"},o.createElement(h.b,{marginLeft:2},o.createElement(h.K,null,c.a._("Post to Facebook")))))}),me(he(he(n)),"renderTwitterShare",function(){return o.createElement(h.b,{display:"flex",alignItems:"center",marginLeft:5},o.createElement(h.e,{checked:n.state.isTwitterChecked,id:"share_twitter",onChange:n.handleTwitterCheckboxChanged,size:"sm"}),o.createElement(h.q,{htmlFor:"share_twitter"},o.createElement(h.b,{marginLeft:2},o.createElement(h.K,null,c.a._("Post to Twitter")))))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,o["Component"]),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.resourceLoaded,n=e.userSocial;t&&n&&this.setState({isFacebookChecked:!!n.facebook_publish_stream_enabled,isTwitterChecked:!!n.twitter_publish_enabled})}},{key:"render",value:function(){var e=this.props,t=e.resourceLoaded,n=e.userSocial;if(!t||!n)return null;var r=n.connected_to_facebook,a=n.twitter_url;return!(!r&&!a)&&o.createElement(h.b,{display:"flex",padding:2},r&&this.renderFacebookShare(),a&&this.renderTwitterShare())}}])&&de(n.prototype,r),a&&de(n,a),t}(),ye=Object(u.compose)(Object(a.connect)(function(e){var t=e.viewer;return{userId:t.isAuth?t.id:""}}),Object(se.b)({name:"UserResource",key:"userSocial",options:function(e){return{user_id:e.userId,field_set_key:"social_connect"}}}))(be),ve=n("Qcp0"),ge=(n("rHfS"),n("bWet")),_e=n("ms9C"),Se=n("FIpZ");function we(e){var t,n,r="-7 -7 30 30";switch(e.name){case"facebook":n=o.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#3B5998"}),t=o.createElement("path",{fill:"#fff",d:"M9.267 16V8.702h2.506l.376-2.845H9.267V4.041c0-.823.234-1.384 1.442-1.384l1.541-.001V.112A21.09 21.09 0 0 0 10.005 0C7.783 0 6.262 1.325 6.262 3.76v2.097H3.75v2.845h2.512V16h3.005z"});break;case"messenger":n=o.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#1DA1F2"}),t=o.createElement("path",{fill:"#fff",d:"M8 0C3.582 0 0 3.316 0 7.407c0 2.332 1.163 4.41 2.981 5.769V16l2.724-1.495c.727.201 1.497.31 2.295.31 4.418 0 8-3.317 8-7.408C16 3.317 12.418 0 8 0zm.795 9.975L6.758 7.802 2.783 9.975l4.372-4.642 2.087 2.173 3.926-2.173-4.373 4.642z"});break;case"pinterest":r="0 0 16 16",t=o.createElement("path",{fill:"#e60023",d:"M5.644 15.648A8.01 8.01 0 0 0 8 16a8 8 0 1 0-2.847-.521c-.073-.625-.151-1.655.017-2.378.145-.621.934-3.958.934 -3.958s-.238-.477-.238-1.183c0-1.107.642-1.934 1.44-1.934.68 0 1.008.51 1.008 1.122 0 .683-.435 1.705-.66 2.652-.187.792.398 1.439 1.18 1.439 1.416 0 2.504-1.493 2.504-3.647 0-1.907-1.37-3.24-3.327 -3.24-2.266 0-3.596 1.7-3.596 3.456 0 .684.264 1.418.593 1.817a.238.238 0 0 1 .055.229c-.06.252-.195.792-.221.903-.035.146-.116.177-.267.107C3.581 10.4 2.96 8.946 2.96 7.778c0-2.512 1.825-4.82 5.262-4.82 2.763 0 4.91 1.97 4.91 4.6 0 2.745-1.73 4.954-4.133 4.954-.807 0-1.566-.42-1.825-.914 0 0-.4 1.52-.496 1.893-.188.722-.71 1.637-1.033 2.157z"});break;case"link":n=o.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#EFEFEF"}),t=o.createElement("path",{fill:"#8e8e8e",d:"M6.555 7.236L4.848 8.943l-2.389 2.39 2.21 2.21 2.39-2.39 1.707-1.707.82.821a.92.92 0 0 1 .006 1.301l-4.166 4.167a.926.926 0 0 1-1.302-.005L.272 11.878a.92.92 0 0 1-.005-1.302L4.433 6.41a.924.924 0 0 1 1.302.005l.82.821zM9.45 8.764l1.707-1.707 2.389-2.389-2.21-2.211-2.39 2.389-1.707 1.707-.82-.82a.921.921 0 0 1-.006-1.302L10.578.265a.924.924 0 1 1.301.006l3.853 3.852a.92.92 0 0 1 .004 1.301l-4.165 4.167a.924.924 0 0 1-1.302-.006l-.82-.82zm-4.573.889l4.779-4.78 1.473 1.474-4.779 4.78-1.473-1.474z"});break;default:t=null}return o.createElement("svg",{width:"36",height:"36",viewBox:r},n,t)}var Ee=n("dMYx");function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=je(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==Oe(r)&&"function"!=typeof r?Pe(o):r,Te(Pe(Pe(n)),"state",{showShareLink:!1,pinterestProfileLink:"",fb:null}),Te(Pe(Pe(n)),"selectText",function(e){e.target.select()}),Te(Pe(Pe(n)),"openSocialDialog",function(e,t){var o,r=n.props,a=r.handleShare,i=r.dismissModal,c=r.experienceComplete;switch(e){case"facebook":ge.default.logIn(n.state.fb,function(){_e.a.shareFacebookInvite(n.getShareOptions(5))});break;case"messenger":ge.default.logIn(n.state.fb,function(){_e.a.shareFbMessengerInvite(n.getShareOptions(6))});break;case"link":o=n.getShareOptions(12),_e.a.createAndLogShareInvite(o).then(function(e){var t=e.invite_url;t?n.setState({pinterestProfileLink:t,showShareLink:!0}):a&&a()});break;default:a&&a()}"link"!==e&&(c&&c(),i(!0))}),Te(Pe(Pe(n)),"handleShareLinkDismiss",function(e){n.setState({showShareLink:!1})}),Te(Pe(Pe(n)),"handleFacebookClick",function(e){n.openSocialDialog("facebook",e)}),Te(Pe(Pe(n)),"handleMessengerClick",function(e){n.openSocialDialog("messenger",e)}),Te(Pe(Pe(n)),"handlePinterestClick",function(e){n.openSocialDialog("pinterest",e)}),Te(Pe(Pe(n)),"handleLinkClick",function(e){n.openSocialDialog("link",e)}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;ge.default.ensureInit(function(t){return e.setState({fb:t})})}},{key:"getShareOptions",value:function(e){var t=this.props.pin;return{invite_channel:e,object_type:Ee.a.PIN,object_id:t.id,name:"",description:t.description||"",path:"/pin/".concat(t.id,"/"),picture:t.images&&t.images["236x"]&&t.images["236x"].url||""}}},{key:"render",value:function(){var e=this.props.close,t=this.state,n=t.pinterestProfileLink,o=t.showShareLink,a=r.a.createElement(Se.a,{link:n,handleClick:this.handleShareLinkDismiss,handleFocus:this.selectText}),i=function(e,t,n){var i="share-upsell-label-"+e,c="";return"facebook"===e?c="#3b5998":"messenger"===e&&(c="#1da1f2"),"link"===e&&o?a:r.a.createElement(h.P,{onTouch:function(e){var t=e.event;return n(t)},fullWidth:!1},r.a.createElement(h.b,{display:"flex",paddingY:2,alignItems:"center"},r.a.createElement(we,{name:e}),r.a.createElement(h.h,{xs:1}),r.a.createElement("div",{id:i},r.a.createElement(h.K,{size:"xl",bold:!0},r.a.createElement("span",{style:{color:c}},t)))))};return r.a.createElement(h.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},r.a.createElement("div",null,r.a.createElement(h.b,{paddingX:6,flex:"none"},r.a.createElement(h.b,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:16,right:16}}},r.a.createElement(h.o,{icon:"cancel",onClick:e,accessibilityLabel:c.a._("Cancel"),size:"sm"})),r.a.createElement(h.m,{size:"md"},c.a._("Saved!","Save pin to board")),r.a.createElement(h.b,{paddingY:3,marginRight:8},r.a.createElement(h.K,{size:"xl"},c.a._("Know someone who might like it?","Upsell share a recently saved pin to board"))),r.a.createElement(h.b,{paddingY:2,flex:"none"},i("facebook",c.a._("Send on Facebook"),this.handleFacebookClick),i("messenger",c.a._("Send on Messenger"),this.handleMessengerClick),i("pinterest",c.a._("Send on Pinterest"),this.handlePinterestClick),i("link",c.a._("Send a link"),this.handleLinkClick)))),r.a.createElement(h.h,{xs:1}))}}])&&Ce(n.prototype,a),i&&Ce(n,i),t}();function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return Fe}),n.d(t,"c",function(){return Me}),n.d(t,"b",function(){return Ke});var Fe=4e3,Ne=660,Me={LOADING:"loading",SUCCESS:"success"},Ke=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,a=(e=Be(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==Ie(a)&&"function"!=typeof a?Le(r):a,De(Le(Le(n)),"state",{experienceComplete:function(){},experienceDismiss:function(){},height:0}),De(Le(Le(n)),"pinImageRef",Object(o.createRef)()),De(Le(Le(n)),"unmounted",!1),De(Le(Le(n)),"safeSetState",function(e,t){n.unmounted?t&&t():n.setState(e,t)}),De(Le(Le(n)),"scrollToRelatedPins",function(){document&&document.documentElement&&"scrollBehavior"in document.documentElement.style?window.scroll({top:n.state.height,left:0,behavior:"smooth"}):window.scrollTo(0,n.state.height)}),De(Le(Le(n)),"_adjustHeightToPin",function(){0===n.state.height&&(n.safeSetState({height:Ne}),n.props.onHeightChange&&n.props.onHeightChange(Ne))}),De(Le(Le(n)),"close",function(){var e=n.props.handleAbort;n.experienceDismiss&&n.experienceDismiss(),e()}),De(Le(Le(n)),"dismissModal",function(e){var t=n.props.dismissModal;n.experienceDismiss&&!e&&n.experienceDismiss(),t&&t()}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this._adjustHeightToPin()}},{key:"componentDidUpdate",value:function(){this._adjustHeightToPin()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var e=this,t=this.props,n=t.boardSavedTo,a=t.boardWithSection,i=t.color,l=t.displaySuccessAnimation,s=t.handleSocialConnectSet,u=t.handleSaveToBoard,p=t.isInModal,f=t.newPin,m=t.pin,b=t.onCloseAndShare,y=t.onBoardCreated,v=t.sensitiveContentNotice,g=t.setModalTitle,_=t.showCreate,S=t.showSharingUpsell,w=t.shouldRenderContent,E=t.suggestedBoardTitle,O=t.updateDescription;if(!m||!m&&!m.resourceLoaded||!w)return null;var C=this.state.height,j=null;f&&f.board&&(j=f.board.name);var k=C||660,P=v&&v.title||this.props.modalTitle,T=v?r.a.createElement(ve.a,{notice:v,inModal:!0}):r.a.createElement(h.b,{position:"relative",height:k,width:"100%",display:"flex",justifyContent:"center"},r.a.createElement(h.b,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",shape:"rounded",width:"100%"},r.a.createElement(h.b,{width:"40%",direction:"column",display:"flex",justifyContent:"between",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #f5f5f5"}}},r.a.createElement(h.b,{display:"flex",flex:"grow",alignItems:"center",justifyContent:"start",direction:"column",marginTop:3},r.a.createElement(ae.a,{color:i,pin:m,pinImageRef:this.pinImageRef,updateDescription:O})),r.a.createElement(ye,{onSocialConnect:s})),S?r.a.createElement(ne.a,{placementId:33,experienceIds:[500388]},function(t){var n=t.complete,o=t.dismiss;t.display_data;return e.experienceComplete=n,e.experienceDismiss=o,r.a.createElement(xe,{handleShare:b,close:e.close,experienceComplete:n,pin:m,dismissModal:e.dismissModal})}):r.a.createElement(h.b,{display:"flex",width:"60%"},r.a.createElement(te,{boardSavedTo:n,boardWithSection:a,isRepin:!0,onBoardCreated:y,onBoardSave:u,onClose:this.close,pinId:m.id,showCreate:_,suggestedBoardTitle:E,setModalTitle:p?g:void 0}))),r.a.createElement(d.a,{name:"web_board_create_delight"},function(t){var n=t.anyEnabled;return r.a.createElement(o.Fragment,null,n&&l&&r.a.createElement(oe.b,{onDismiss:e.dismissModal,pin:m,pinImageRef:e.pinImageRef,selectedBoardName:j}))}));return p?r.a.createElement(re.a,{accessibilityCloseLabel:c.a._("Close"),accessibilityModalLabel:P,onDismiss:this.close,heading:P,size:"lg"},T):T}}])&&Re(n.prototype,a),i&&Re(n,i),t}();De(Ke,"defaultProps",{pwtAuxData:{}})},LxOv:function(e,t,n){"use strict";var o=n("aqOH"),r=function(e){var t=document.documentElement,n=t.scrollWidth-t.clientWidth,r=t.scrollHeight-t.clientHeight;e&&(n=Math.max(n,0),r=Math.max(r,0)),o.default.isAuthenticated()||(r=340),window.resizeBy(n,r)},a={};a.open=function(e,t,n){var o=function(e,t){var n=screen.width,o=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+e+",height="+t+",left="+Math.round((n-e)/2)+",top="+(o>t?Math.round((o-t)/2):0)}(t,n);window.open(e,void 0,o)},a.shrinkWrap=function(){r(!1)},a.contain=function(){r(!0)},a.resizeViewPort=function(e,t){window.outerWidth?window.resizeTo(e+(window.outerWidth-window.innerWidth),t+(window.outerHeight-window.innerHeight)):(window.resizeTo(500,500),window.resizeTo(e+(500-document.body.offsetWidth),t+(500-document.body.offsetHeight)))},t.a=a},MFVv:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var o=n("D+W/"),r=function(e,t){if(!t)return e;var n=new RegExp(/http(s?):/);if(!n.test(e)){var o=n.exec(t);if(o&&o.length)e=o[0]+e}return e},a=function(e){var t=o.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION;return{clamped:e.length>50?e.slice(0,50).trim()+"â€¦":e,full:e.length>t?e.slice(0,t):e}}},"QMJ+":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("GyhR"),r=n("D+W/"),a=n("q579"),i=n("+U6O");function c(e){var t=e.url,n=e.description,c=e.color;return c=c||r.a.DEFAULT_IMAGELESS_PIN_COLOR,o.createElement(i.b,{shape:"rounded",height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:c}}},o.createElement(i.b,{maxHeight:200,padding:4,overflow:"hidden"},t&&o.createElement(i.b,{marginBottom:2},o.createElement(i.K,{color:"white",size:"xs"},a.a.parse(t).hostname||t)),o.createElement(i.b,{maxHeight:144},o.createElement(i.K,{bold:!0,color:"white",overflow:"normal",size:"lg"},n))))}},Qcp0:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),a=n("iJ35"),i=n("+U6O");function c(e){var t=e.action,n=e.alignCenter,o=t.title,c=t.description,l=t.button,s=o&&o.text,u=c&&c.text,d=l&&l.text||"",p=l&&l.link||"",f=l&&l.link?l.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""):"";return l&&d&&p.startsWith("http")?r.a.createElement(i.b,null,r.a.createElement(i.b,{marginBottom:1},r.a.createElement(i.K,{bold:!0,align:n?"center":"left"},""!==d?d:"Visit")),r.a.createElement(i.b,{marginBottom:1},r.a.createElement(a.b,{className:"underlineLink",to:p},r.a.createElement("span",{style:{textDecoration:"underline"}},r.a.createElement(i.K,{align:n?"center":"left",truncate:!0},f))))):r.a.createElement(i.b,null,!!s&&r.a.createElement(i.b,{marginBottom:1},r.a.createElement(i.K,{bold:!0,align:n?"center":"left"},s)),!!u&&r.a.createElement(i.b,{marginBottom:1},r.a.createElement(i.K,{align:n?"center":"left"},u)))}n.d(t,"a",function(){return u});var l={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},s={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function u(e){var t=e.inModal,n=e.notice,o=n.title,a=n.description,u=n.actions,d=void 0===u?[]:u,p=a&&a.text||"",f=1===d.length;return r.a.createElement(i.b,{shape:"rounded",padding:6,dangerouslySetInlineStyle:{__style:t?s:l}},!!o&&!t&&r.a.createElement(i.b,{marginBottom:2,display:"flex"},r.a.createElement(i.m,{size:"xs"},o)),!!p&&r.a.createElement(i.b,{marginBottom:4},r.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},r.a.createElement(i.K,{overflow:"normal",align:t?"center":"left"},p))),!!d.length&&r.a.createElement(i.b,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:t?"column":"row"},d.map(function(e){return r.a.createElement(i.b,{column:t||f?12:6,paddingY:1,paddingX:2,key:JSON.stringify(e)},r.a.createElement(c,{action:e,alignCenter:t||f}))})))}},RTyF:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),a=n("Ivf5"),i=n("POeB"),c=n("UgxU"),l=n("A6bX"),s=n("XwKk"),u=n("Qo1m");var d=n("4+0X"),p=n("ePT2"),f=n("TYRv"),h=n("KCDi"),m=n("SMmS"),b=n("KsVg"),y=n("CAUj"),v=n("9Y9K"),g=n("VSY/"),_=n("dBWR"),S=n("MFVv"),w=n("lixz"),E=n("NmcB"),O=n("3Wjl"),C=n("Kqiz"),j=n("2YES"),k=n("evwu");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){A(e,t,n[t])})}return e}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",function(){return M}),n.d(t,"a",function(){return K});var L=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi,D="236x",F=function(e){function t(){var e,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];return o=this,a=(e=I(t)).call.apply(e,[this].concat(b)),n=!a||"object"!==P(a)&&"function"!=typeof a?B(o):a,A(B(B(n)),"state",{boardSavedTo:null,displaySuccessAnimation:!1,experienceComplete:function(){},experienceDismiss:function(){},newPin:null,modalTitle:n.props.showCreate?u.a._("Create board"):u.a._("Choose board")||"",pinDescription:n.props.pin&&n.props.pin.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1},showSharingUpsell:!1}),A(B(B(n)),"unmounted",!1),A(B(B(n)),"setModalTitle",function(e){return n.safeSetState({modalTitle:e})}),A(B(B(n)),"updateDescription",function(e){n.safeSetState({pinDescription:e})}),A(B(B(n)),"close",function(){var e=n.props.onClose;e&&e(),n.setPWTAbort(),Object(E.a)(2502,{component:5,element:610})}),A(B(B(n)),"safeSetState",function(e,t){n.unmounted?t&&t():n.setState(e,t)}),A(B(B(n)),"getPinResource",function(e,t,o){var r,a=n.props,i=a.color,c=a.location,l=a.pin,u=a.method,d=a.guid,f=a.additionalCreateFields,h=a.advertiser_id;l.id&&(r=Object(s.a)(l,c)||"".concat(l.tracking_params,"~0"));var m=l.id?"RepinResource":"PinResource",b=!l.id&&l.image_url?Object(S.b)(l.image_url,l.link):"",y=T({},f,{board_id:t||"",color:i||"",clientTrackingParams:r,description:n.state.pinDescription,guid:d||"",link:l.link,image_base64:l.image_base64,image_url:b,is_buyable_pin:!1,is_removable:l.promoted_is_removable,media_upload_id:l.media_upload_id,method:u||"",pin_id:l.id||"",section:o,title:l.title||""},h?{advertiser_id:h}:{});if(!e){var v=n.state.sharing,g=v.facebook,_=v.twitter;y.share_facebook=g,y.share_twitter=_}return p.a.create(m,y)}),A(B(B(n)),"triggerPubSubs",function(e){d.a.instance.publish("currentUser","pinCreated",e),d.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),A(B(B(n)),"makeCancelablePromise",function(e){var t=!1;return{promise:new Promise(function(n,o){e.then(function(e){return t?o({isCanceled:!0}):n(e)}),e.catch(function(e){return o(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}}),A(B(B(n)),"getSavedToText",function(e,t){return t?[Object(g.c)(u.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board"),{sectionName:t.title,boardName:e})]:[u.a._("Saved to"),e]}),A(B(B(n)),"handleLogToastClick",function(){Object(E.a)(101,{component:20,view:52})}),A(B(B(n)),"showSuggestedBoardToast",function(e,t,o,a){var i=n.props,c=i.hideAllToasts,l=i.shouldShowToast,s=i.showToast;if(l&&!n.state.showSharingUpsell&&e){c();var d=e.name,p=e.url,f=e.image_thumbnail_url;s(function(e){var t=e.onHide;return r.a.createElement(h.a,{duration:C.a,onHide:t,text:[u.a._("You might also like","Post repin suggested board"),d],href:p,imageUrl:f,onClick:n.handleLogToastClick})})}}),A(B(B(n)),"dismissModal",function(e){var t=n.state,o=t.resolve,r=t.newPin;o&&o(r)}),A(B(B(n)),"fetchBoardRecommendation",function(e){return p.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(function(e){return Promise.resolve(e.resource_response.error?null:e.resource_response.data[0])})}),A(B(B(n)),"handleBoardSaveSuccess",function(e,t,o,r){var a=n.props,i=a.action,s=a.dispatch,d=a.pin,p=a.requestContext,f=a.setCompletionPromise,h=a.viewerUserId;c.a.instance.refreshPlacedExperiences();var m=c.a.instance.getPlacedExperience(33),b=c.a.instance.getPlacedExperience(11),v=(p.experiments.v2GetGroup("web_board_create_delight")||"").startsWith("enabled");if(f(n.makeCancelablePromise(new Promise(function(t,a){var c=e.resource_response.data;n.triggerPubSubs(c);var l=n.state.pinDescription.match(L)||[];l.length>0&&Object(E.a)(2,{element:10273,hashtags:JSON.stringify(l),objectId:n.props.pin.id}),"repin"===i?(n.fetchBoardRecommendation(c).then(function(e){n.showSuggestedBoardToast(e,c,o,r)}),m&&500388===m.experience_id?n.safeSetState({showSharingUpsell:!0,newPin:c,resolve:t}):r&&v?n.safeSetState({displaySuccessAnimation:!0,modalTitle:u.a._("Board created","Modal title after creating a new board"),newPin:c,resolve:t}):t(c)):("create"===i&&b&&500840===b.experience_id&&(s({type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:!0}}),Object(E.a)(7510,{component:13233})),t(c))}))),s(Object(k.c)(t)),s(Object(y.d)({boardId:t.id,sectionId:o&&o.id,increment:1})),h&&(s(Object(O.a)({userId:h,increment:1})),s(Object(_.d)())),o||!t.image_cover_url){var g=d.image_url,S=d.images;t.image_cover_url=g||S&&S[D]&&S[D].url||"",s(Object(k.d)({},t))}o&&s(Object(l.a)(o.id)),s({type:"PIN_SAVE",payload:{pinId:d.id,saved:!0}})}),A(B(B(n)),"handleSaveToBoard",function(e,t,o){var a=n.props,c=a.onToggleModal,l=a.shouldShowToast,s=a.showToast;n.setPWTAbort(),l&&(n.close(),s(function(o){var a=o.onHide;return r.a.createElement(h.a,{duration:C.a,onHide:a,text:n.getSavedToText(e.name,t),href:t?"".concat(e.url).concat(t.slug):e.url,imageUrl:e.image_cover_url,onClick:n.handleLogToastClick})}));var u="secret"===(e.privacy||""),d={board:t?t.id:e.id,state:C.c.LOADING};n.safeSetState({boardSavedTo:d},function(){n.getPinResource(u,e.id,(t||{}).id).callCreate({showError:!1}).then(function(r){n.safeSetState({boardSavedTo:Object.assign(d,{state:C.c.SUCCESS})},function(){return n.handleBoardSaveSuccess(r,e,t,o)}),c&&c(!1)}).catch(function(e){n.unmounted||n.safeSetState({boardSavedTo:null}),i.default.showError(e.message_detail||e.message);var t=n.makeCancelablePromise(Promise.reject(e));n.props.setCompletionPromise(t),c&&c(!1)})})}),A(B(B(n)),"handleSocialConnectSet",function(e,t){var o=Object.assign({},n.state.sharing);e===f.default.FACEBOOK?o.facebook=t:e===f.default.TWITTER&&(o.twitter=t),n.safeSetState({sharing:o})}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,r.a.Component),n=t,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.boardWithSection,o=t.showCreate;this.safeSetState({pinDescription:e.pin&&e.pin.description||e.description||""}),n&&o?this.setModalTitle(u.a._("Create section","modal title for create section pane")):n&&!o&&this.setModalTitle(u.a._("Choose section","modal title for choose section"))}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"setPWTAbort",value:function(){Object(w.f)({name:"BoardPickerUserNavStopTraceEvent",result:{COMPLETE:1,USER_ABORT:2,RESPONSE_ERROR:3,RESPONSE_TIMEOUT:4,NETWORK_ERROR:5,CLIENT_SOFTWARE_ERROR:6,OTHER:7,NAVIGATE_AWAY:8,EXIT_APP:9,BACKGROUND_APP:10,COMPLETE_WITHOUT_CONTENT:11}.ABORTED})}},{key:"render",value:function(){var e=this.close,t=this.dismissModal,n=this.handleSaveToBoard,o=this.handleSocialConnectSet,r=this.setModalTitle,a=this.updateDescription,i=this.state,c=i.boardSavedTo,l=i.displaySuccessAnimation,s=i.modalTitle,u=i.newPin,d=i.showSharingUpsell,p=this.props,f=p.color,h=p.pin;return this.props.children({boardSavedTo:c,color:f,dismissModal:t,displaySuccessAnimation:l,handleAbort:e,handleSaveToBoard:n,handleSocialConnectSet:o,modalTitle:s,newPin:u,pin:h,setModalTitle:r,showSharingUpsell:d,updateDescription:a})}}])&&x(n.prototype,o),a&&x(n,a),t}(),N=function(e){var t=e.advertiser,n=e.viewer,o=e.location,r=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null;return T({location:o},r?{advertiser_id:r}:{},n.isAuth?{viewerUserId:n.id}:{})},M=Object(v.compose)(j.e,Object(a.connect)(N),b.a)(F),K=Object(v.compose)(j.e,Object(a.connect)(N),b.a,Object(m.b)({name:"FakePinResource",key:"pin",options:function(e){return T({},e.fakeResource.options)}}))(F)},RiVL:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),a=n("Qo1m"),i=n("Y2BC"),c=n("Irlq"),l=n("+U6O"),s=185;var u=Object(i.b)({name:"PinSaveStatusResource",key:"saveStatusResource",options:function(e){return{id:e.pin.id}}},{allowStale:!1})(function(e){var t=e.saveStatusResource.data;return t&&t.pinned_to_board?r.a.createElement(l.b,null,r.a.createElement(l.b,{color:"red","data-test-id":"already-pinned",display:"flex",padding:3,shape:"rounded",width:s},r.a.createElement(l.K,{align:"center",bold:!0,color:"white",size:"sm"},Object(c.b)(a.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" "))),r.a.createElement(l.b,{display:"flex",justifyContent:"center",marginTop:-3},r.a.createElement(l.n,{accessibilityLabel:"",color:"red",icon:"heart",size:26}))):null}),d=n("P4K9"),p=n("QMJ+");n("hvnN");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(e,n){var o,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=m(t).call(this,e,n),o=!a||"object"!==f(a)&&"function"!=typeof a?y(r):a,v(y(y(o)),"handleChange",function(e){o.props.onChange&&o.props.onChange.call(y(y(o)),e.target.value,e.target.selectionStart),o.setState({value:e.target.value})}),v(y(y(o)),"updateCursor",function(e){o.props.onCursorChange&&o.props.onCursorChange(e.target.selectionStart)}),v(y(y(o)),"handleKeyUp",function(e){o.props.onKeyUp&&o.props.onKeyUp(e),o.updateCursor(e)}),v(y(y(o)),"handleKeyDown",function(e){o.props.onKeyDown&&o.props.onKeyDown(e)}),v(y(y(o)),"handleFocus",function(e){o.props.onFocus&&o.props.onFocus(e),o.updateCursor(e)}),v(y(y(o)),"handleBlur",function(e){o.props.onBlur&&o.props.onBlur(e)}),v(y(y(o)),"handleClick",function(e){o.props.onClick&&o.props.onClick(e),o.updateCursor(e)}),o.state={isFocused:o.props.focused||!1,value:o.props.value},o}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.focusIfNeeded()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({isFocused:e.focused,value:e.value})}},{key:"componentDidUpdate",value:function(){this.focusIfNeeded()}},{key:"focusIfNeeded",value:function(){this.state.isFocused&&document.activeElement!==this._textArea&&this._textArea.focus()}},{key:"select",value:function(){this._textArea.select()}},{key:"render",value:function(){var e=this,t=this.props;return r.a.createElement("textarea",{className:t.className,cols:t.cols,disabled:t.disabled?"disabled":"",id:t.id,name:t.name,onBlur:this.handleBlur,onChange:this.handleChange,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,placeholder:t.placeholder,ref:function(t){e._textArea=t},rows:t.rows,style:t.style,value:this.state.value})}}])&&h(n.prototype,a),i&&h(n,i),t}();g.defaultProps={validators:[]};var _=function(e){var t=e.allowChange,n=e.description,r=e.editing,i=e.onHandleDescriptionBlur,c=e.onHandleDescriptionEdit,s=e.onRefTextArea,u=e.onChange,d=e.onCursorChange,p=function(e){var t=e.description,n=e.editing,r=e.allowChange;return o.createElement(l.b,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},o.createElement(l.b,{paddingX:1,overflow:"hidden"},o.createElement(l.K,{bold:!0,color:t.clamped?"darkGray":"gray",size:"sm"},t.clamped?t.clamped:a.a._("Tell us about this Pin..."))),o.createElement(l.b,{paddingX:1},!n&&r&&o.createElement(l.n,{accessibilityLabel:a.a._("Edit description"),icon:"edit"})))};return o.createElement(l.b,{mdDisplay:"flex"},r?o.createElement(g,{focused:!0,onBlur:i,onFocus:t&&c,onChange:u,onCursorChange:d,placeholder:a.a._("Tell us about this Pin..."),style:t&&{outline:"none",maxHeight:120,minHeight:60,width:"100%"},ref:s,rows:3,value:n.full}):o.createElement(l.b,{width:"100%"},t?o.createElement(l.P,{onTouch:c},o.createElement(p,{description:n,editing:r,allowChange:t})):o.createElement(p,{description:n,editing:r,allowChange:t})))},S=n("MFVv"),w=n("2Npu");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,x=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/,I=0,R="g",B=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=C(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==E(r)&&"function"!=typeof r?k(o):r,P(k(k(n)),"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:n.props.pin&&n.props.pin.description&&n.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,editedBefore:!1,flyoutOpened:!1}),P(k(k(n)),"onDescriptionChange",function(e,t){var o=new RegExp(T,R),r="";if(t<e.length){for(var a=o.exec(e),i=o.lastIndex<t;a&&i;)a=o.exec(e),i=o.lastIndex<t;var c=!!a&&T.test(e.slice(a.index,t));i=!!a&&a.index<t,a&&c&&i&&(r=a[I])}else{var l=x.exec(e);r=l?l[I]:""}n.updateDescription(e);var s=T.test(r),u=n.state.isHashtagFlyoutOpen?n.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");n.setState({cursorIndex:t,flyoutCursorIndex:u,description:e,hashtagQuery:r,isHashtagFlyoutOpen:s,flyoutOpened:n.state.flyoutOpened||s})}),P(k(k(n)),"onCursorChange",function(e){var t=n.state,o=t.isHashtagFlyoutOpen,r=t.flyoutCursorIndex;o&&e<r&&n.setState({isHashtagFlyoutOpen:!1})}),P(k(k(n)),"updateDescription",function(e){n.props.updateDescription&&n.props.updateDescription(e)}),P(k(k(n)),"handleDescriptionBlur",function(e){var t=e.target.value.trim(),o=n.state.isHashtagFlyoutOpen;n.updateDescription(t),n.setState({description:t,editing:o})}),P(k(k(n)),"handleDescriptionEdit",function(){n.setState({editing:!0,editedBefore:!0})}),P(k(k(n)),"handleHashtagAddition",function(e){var t=n.props;(0,t.contextLog)(101,{component:208,element:10249,hashtags:e,objectId:t.pin.id});var o=n.state.flyoutCursorIndex,r=Number(o+n.state.hashtagQuery.length),a=n.state.description.slice(0,o)+e+" "+n.state.description.slice(r);n.updateDescription(a),n.setState({description:a,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),P(k(k(n)),"handleRefTextArea",function(e){n._textArea=e}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.color,o=t.isFirstPin,a=t.pin,i=t.pinImageRef,c=this.state,s=c.description,f=c.editing,h=c.flyoutOpened,m=c.hashtagQuery,b=c.isHashtagFlyoutOpen,y=a.images,v=a.link,g=y&&y["236x"],w=g&&g.url||a.image_base64;return r.a.createElement(l.b,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:o?"50%":"",dangerouslySetInlineStyle:{__style:h&&f?{transform:"translateY(-75px)"}:{}}},r.a.createElement(l.b,{display:"flex",direction:"column",alignItems:"center"},a&&a.id&&r.a.createElement(u,{pin:a}),r.a.createElement(l.b,{paddingY:o?9:0,width:216},r.a.createElement(l.b,{ref:i,maxHeight:h&&f?220:335,shape:"rounded",overflow:"hidden"},w?r.a.createElement(l.p,{alt:s,src:w,naturalHeight:g.height||1,naturalWidth:g.width||1}):!!v&&r.a.createElement(p.a,{color:n||"",description:s,url:v})),r.a.createElement(l.b,{marginTop:2,paddingX:2,id:"PinPanePinMeta"},r.a.createElement("div",{ref:function(t){e.anchor=t}},r.a.createElement(_,{allowChange:!a.is_native,description:Object(S.a)(s),editing:f,hashtagFlyoutOpen:b,onHandleDescriptionBlur:this.handleDescriptionBlur,onHandleDescriptionEdit:this.handleDescriptionEdit,onRefTextArea:this.handleRefTextArea,onChange:this.onDescriptionChange,onCursorChange:this.onCursorChange}))))),this.anchor&&b?r.a.createElement(d.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:f,query:m}):null)}}])&&O(n.prototype,a),i&&O(n,i),t}();t.a=Object(w.a)(B)},UApa:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return g});var o=n("GyhR"),r=n.n(o),a=n("kAB2"),i=n("Qo1m"),c=n("Irlq"),l=n("+U6O");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=1800,b=function(e){return{opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}},y=function(e,t,n,o){var r=[],a={};if(n.current&&o&&o.current){var i=t.current.getBoundingClientRect(),c=n.current.getBoundingClientRect(),l=o.current.getBoundingClientRect();a={left:c.left-i.left,top:c.top-i.top,width:c.width,height:c.height};var s={x:l.x-c.x,y:l.y-c.y},u={x:l.width/c.width,y:l.height/c.height};r.push("translate(".concat(s.x,"px, ").concat(s.y,"px)")),r.push("scale(".concat(u.x,", ").concat(u.y,")"))}return{position:"absolute",left:a.left,top:a.top,width:a.width,height:a.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?r.join(" "):"none",transform:e?r.join(" "):"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",overflow:"hidden",zIndex:2}},v=function(e){return{opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"}},g=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,n=!(a=(e=d(t)).call.apply(e,[this].concat(c)))||"object"!==s(a)&&"function"!=typeof a?f(r):a,h(f(f(n)),"state",{isInitialized:!1}),h(f(f(n)),"containerRef",Object(o.createRef)()),h(f(f(n)),"pinDestinationRef",Object(o.createRef)()),n}var n,g,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["PureComponent"]),n=t,(g=[{key:"componentDidMount",value:function(){var e=this;this.requestAnimationFrameId=window.requestAnimationFrame(function(){e.setState({isInitialized:!0})})}},{key:"componentWillUnmount",value:function(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.isInitialized,o=this.props.onDismiss;n&&o&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(o,m+800))}},{key:"render",value:function(){var e,t=this.props,n=t.firstRepin,s=t.pin,u=t.pinImageRef,d=t.selectedBoardName,p=s.description,f=void 0===p?"":p,h=s.images["236x"]||{},m=h.height,g=void 0===m?0:m,_=h.width,S=void 0===_?0:_,w=h.url,E=void 0===w?"":w,O=this.state.isInitialized;return r.a.createElement(o.Fragment,null,r.a.createElement(l.b,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef},r.a.createElement(l.b,{maxHeight:335,overflow:"hidden",dangerouslySetInlineStyle:{__style:y(O,this.containerRef,u,this.pinDestinationRef)}},r.a.createElement(l.p,{alt:f,src:E||"",naturalHeight:g||1,naturalWidth:S||1})),r.a.createElement(l.b,{color:"white",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:(e=O,{pointerEvents:"none",opacity:e?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1})}},r.a.createElement(l.b,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:b(O)}},r.a.createElement(a.a,{delay:1250,startAnimation:O},r.a.createElement(l.u,{shape:"rounded",width:270,height:180},r.a.createElement(l.b,{display:"flex",height:"100%",width:"100%"},r.a.createElement(l.b,{ref:this.pinDestinationRef,color:"transparent",marginRight:1,flex:"grow",height:"100%"}),r.a.createElement(l.b,{display:"flex",width:80,direction:"column"},r.a.createElement(l.b,{color:"lightGray",flex:"grow",marginBottom:1}),r.a.createElement(l.b,{color:"lightGray",flex:"grow"}))))),r.a.createElement(l.b,{paddingX:2,dangerouslySetInlineStyle:{__style:v(O)}},r.a.createElement(l.m,{size:"sm"},n?Object(c.b)(i.a._("You saved your first Pin to {{ selectedBoardName }}!","First board create confirmation message"),{selectedBoardName:d}):Object(c.b)(i.a._("You saved this Pin to {{ selectedBoardName }}!","Board create confirmation message"),{selectedBoardName:d})))))))}}])&&u(n.prototype,g),_&&u(n,_),t}();h(g,"defaultProps",{firstRepin:!1})},g4pz:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("GyhR"),r=n.n(o),a="#EFEFEF",i="#333333";function c(e){var t=e.size,n=e.iconColor,o=e.backgroundColor,c=e.grayscale,l=void 0!==c&&c,s=n||(l?i:"#8E8E8E"),u=o||(l?a:"#EFEFEF");return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 36 36",version:"1.1"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("circle",{fill:u,cx:"18",cy:"18",r:"18"}),r.a.createElement("g",{id:"Icons/link",transform:"translate(9.000000, 9.000000)",fill:s,fillRule:"nonzero"},r.a.createElement("path",{d:"M15.75075,5.43075 L12.711,8.46975 L11.916,7.67475 L12.42,7.17075 C12.8595,6.732 12.8595,6.0195 12.42,5.58 C11.9805,5.14125 11.268,5.14125 10.82925,5.58 L10.326,6.084 L9.53025,5.289 L12.56925,2.25 L15.75075,5.43075 Z M8.46975,12.71175 L5.43075,15.75075 L2.24925,12.57 L5.289,9.53025 L6.08325,10.32525 L5.58,10.82925 C5.14125,11.26875 5.14125,11.9805 5.58,12.42 C6.01875,12.8595 6.732,12.85875 7.17075,12.42 L7.674,11.916 L8.46975,12.71175 Z M10.97925,0.65925 L7.9395,3.69825 C7.06125,4.5765 7.06125,6.00075 7.9395,6.87975 L8.73525,7.67475 L7.674,8.73525 L6.879,7.9395 C6.00075,7.06125 4.5765,7.06125 3.69825,7.9395 L0.65925,10.9785 C-0.21975,11.8575 -0.21975,13.28175 0.65925,14.16 L3.84,17.3415 C4.71825,18.21975 6.1425,18.21975 7.02075,17.3415 L10.0605,14.3025 C10.93875,13.4235 10.93875,11.99925 10.0605,11.121 L9.2655,10.32525 L10.326,9.2655 L11.121,10.0605 C11.99925,10.93875 13.4235,10.93875 14.30175,10.0605 L17.34075,7.0215 C18.21975,6.14325 18.21975,4.719 17.34075,3.84 L14.16,0.65925 C13.28175,-0.21975 11.8575,-0.21975 10.97925,0.65925 Z",id:"path-1"}))))}},ms9C:function(e,t,n){"use strict";var o=n("H++a"),r=n("ePT2"),a=n("UhjI"),i=n("q579"),c=n("LxOv"),l={DIALOG_WIDTH:550,DIALOG_HEIGHT:420,openDialog:function(e){var t=e.ga_category||"share_twitter";a.a.trackEvent(t,"click");var n=l._getWindowUrl(e.tweet_path,e.tweet_text);c.a.open(n,l.DIALOG_WIDTH,l.DIALOG_HEIGHT)},_getWindowUrl:function(e,t){return i.a.appendQueryString("https://twitter.com/intent/tweet",{via:"pinterest",url:e?i.a.absolutify(e):void 0,text:t||void 0})}},s=l,u={ObjectTypeToInviteObject:{pin:1,board:2,pinner:3,article:5,did_it:6},_convertToInviteObject:function(e){return this.ObjectTypeToInviteObject[e]||0},_logShareInvite:function(e,t){var n=this._convertToInviteObject(e.object_type),o=e.invite_channel,a=null==e.invite_category?3:e.invite_category,i=e.object_id;return r.a.create("SentExternalInviteCallbackResource",{invite_type:{invite_category:a,invite_object:n,invite_channel:o},invite_code:t,object_id:i}).callCreate()},createAndLogShareInvite:function(e){return u.createShareInviteData(e).then(function(t){return u._logShareInvite(e,t.invite_code),Promise.resolve(t)},function(e){return Promise.reject(e)})},createShareInviteData:function(e){var t=this._convertToInviteObject(e.object_type),n=e.invite_channel,o=null==e.invite_category?3:e.invite_category,a=e.object_id;return r.a.create("CreateExternalInviteResource",{invite_type:{invite_category:o,invite_object:t,invite_channel:n},object_id:a}).callCreate().then(function(e){return Promise.resolve(e.resource_response.data)},function(e){return Promise.reject(e)})},logShareInvite:function(e,t){t&&u._logShareInvite(e,t.invite_code)},shareFacebookInvite:function(e){return u.createShareInviteData(e).then(function(t){var n=t.invite_url,r=t.invite_code;return n&&o.default.open({type:"share",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:n,picture:e.picture,callback:function(t){t&&!t.error_message&&u._logShareInvite(e,r)}}),Promise.resolve(t)},function(e){return Promise.reject(e)})},shareTwitterInvite:function(e){var t=this._convertToInviteObject(e.object_type);return u.createShareInviteData(e).then(function(n){var o=n.invite_url,r=n.invite_code,a=e.description;return 6===t&&e.name&&(a=e.name),o&&s.openDialog({tweet_path:o,tweet_text:a}),u._logShareInvite(e,r),Promise.resolve(n)},function(e){return Promise.reject(e)})},shareFbMessengerInvite:function(e){return u.createShareInviteData(e).then(function(t){var n=t.invite_url,r=t.invite_code;return n&&o.default.open({type:"send",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:n,picture:e.picture,callback:function(t){t&&t.success&&u._logShareInvite(e,r)}}),Promise.resolve(t)},function(e){return Promise.reject(e)})}};t.a=u},rHfS:function(e,t,n){},rWj7:function(e,t,n){},vBjq:function(e,t,n){"use strict";var o=n("GyhR"),r=n("Ivf5"),a=n("D+W/"),i=n("vI2X"),c=n("Qo1m"),l=n("Reqc"),s=n("KsVg"),u=n("9Y9K"),d=n("+U6O");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=h(t).call(this,e),n=!r||"object"!==p(r)&&"function"!=typeof r?b(o):r,y(b(b(n)),"onCreateSection",function(){var e=n.props,t=e.board,o=e.dispatch,r=e.completeCreateSectionAction,a=e.pinImport;return n.setState({isSaving:!0}),o(Object(i.a)({boardId:t.id,name:n.state.inputName.trim(),pinImport:a})).then(function(e){n.setState({isSaving:!1,newSection:e}),r(e)}).catch(function(e){n.setState({createError:e.message,isSaving:!1})})}),y(b(b(n)),"handleKeyDown",function(e){var t=e.event,o=(e.value,n.state),r=o.createError,i=o.inputName;[a.a.KeyCode.ENTER,a.a.KeyCode.NUMPAD_ENTER].includes(t.which)&&!r&&i.trim()&&n.onCreateSection()}),y(b(b(n)),"handleChangeName",function(e){var t=e.value;n.setState({createError:null,inputName:t})}),y(b(b(n)),"handleInputRef",function(e){n.setState({inputRef:e})}),n.state={createError:null,inputName:e.initialName||"",inputRef:null,newSection:null,isSaving:!1},n}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidUpdate",value:function(e,t){var n=this.state,o=n.createError,r=n.inputRef;!r||t.inputRef&&!o||r.focus()}},{key:"render",value:function(){var e=this.props,t=e.onClearModal,n=e.showTitle,r=e.positionRelative,a=this.state,i=a.createError,s=a.inputName,u=a.isSaving,p=!!s.trim()&&!i;return o.createElement(d.b,{xs:{display:"flexColumn"},color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:r?"relative":"absolute",shape:"rounded",width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},n&&o.createElement(d.b,{marginTop:3,paddingX:6,paddingY:3},o.createElement(d.K,{size:"xl",bold:!0},c.a._("Add section","Title in the add section modal"))),o.createElement(d.b,{padding:3},o.createElement(d.b,{marginBottom:2},o.createElement(d.q,{htmlFor:"sectionEditName"},o.createElement(d.K,{size:"sm",color:i?"red":"gray"},c.a._("Name","Board section name")))),o.createElement(d.b,null,o.createElement(d.b,{ref:this.handleInputRef},o.createElement(d.M,{id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,errorMessage:i||"",placeholder:c.a._('Like "Lighting"',"Placeholder for board section name"),type:"text",value:s})))),o.createElement(d.j,null),o.createElement(d.b,{display:"flex",flex:"grow"}),o.createElement(d.j,null),o.createElement(d.b,{padding:6},o.createElement(d.b,{display:"flex",justifyContent:"between"},o.createElement(d.c,{onClick:t,text:c.a._("Cancel","cancel section add"),inline:!0}),o.createElement(l.a,{disabled:!p||u,onClick:this.onCreateSection,submitting:u,text:c.a._("Add","add a new section")}))))}}])&&f(n.prototype,r),s&&f(n,s),t}();t.a=Object(u.compose)(Object(r.connect)(),s.a)(v)}}]);