(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[25,"SocialConnectCommon"],{"+pqy":function(e,t,n){"use strict";var o=n("4+0X"),r=n("ePT2"),a=n("TYRv"),i=n("GrJN"),c=n("aqOH");function s(){}Object.assign(s.prototype,{handleConnect:function(e,t,n){if(t&&!c.default.isLimitedLogin()){var o={success:function(o){var r={network:e,data:o};this._internalConnectNetwork(t,r,n)}.bind(this),error:function(e){n.error&&n.error(e)},complete:function(){n.complete&&n.complete()}};this._externalConnectNetwork(e,t,o)}else{var r={network:e};this._internalConnectNetwork(t,r,n)}},updateConnectStatus:function(){r.a.create("UserResource",{user_id:c.default.get("id"),username:c.default.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;c.default.set(t),o.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function(e,t,n){t?a.default.instance().connect(e,n):n.success&&n.success({})},_internalConnectNetwork:function(e,t,n){var o=this,a=r.a.create("UserSocialNetworkResource",t);(e?a.callCreate():a.callDelete()).then(function(e){o.updateConnectStatus(),n.success&&n.success(e)},function(e){n.error&&e instanceof Object&&n.error(e)}).finally(function(){n.complete&&n.complete()})},_getResourceNameForNetworkFriends:function(e){var t=null;switch(e){case a.default.FACEBOOK:t="UserFacebookFriendsResource";break;case a.default.TWITTER:t="UserTwitterFriendsResource";break;case a.default.GOOGLE:t="UserGmailFriendsResource";break;case a.default.MICROSOFT:t="UserMicrosoftFriendsResource";break;default:return}return t},pollForFriends:function(e,t){var n=this,o=(t=t||{}).resourceOptions||{},a=this._getResourceNameForNetworkFriends(e);if(a){var c=r.a.create(a,o);c.callGet({showError:!1}).then(function(){var e=t.success;e&&e(c)},function(o){if(110===o.api_error_code)i.a.setTimeout(function(){n.pollForFriends(e,t)},1e3);else{var r=t.error;r&&r()}})}}});var l=null;s.instance=function(){return l||(l=new s),l},t.a=s},"/TEi":function(e,t,n){"use strict";var o={get:function(e){n.e("ScriptCommon").then(n.bind(null,"91Tc")).then(function(t){var n=t.default;n.load([],"https://apis.google.com/js/client:platform.js","gplus"),n.ready("gplus",function(){e(window.gapi)})})}};t.a=o},"0Wmr":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var o=n("UhjI"),r=n("ePT2"),a="collaborator_approve_invite";function i(e,t){return r.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function c(e,t){return r.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function s(e,t){return function(n){return r.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(function(){o.a.trackEvent(a,"success")}).catch(function(){return o.a.trackEvent(a,"error")})}}function l(e,t,n){return function(t){var o=e.invited_user,a=e.status,i=e.board.id;return r.a.create("accepted"===a?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:i,field_set_key:"boardEdit",invited_user_id:o.id}).callDelete({showError:!1})}}},SOSk:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),a=n("Ivf5"),i=n("PNko"),c=n.n(i),s=n("axJV"),l=n("Qo1m"),u=n("y9IQ"),d=(n("hvnN"),n("tsSC")),f=n("+U6O");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function t(){var e,n,o,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,d=new Array(u),m=0;m<u;m++)d[m]=arguments[m];return o=this,a=(e=h(t)).call.apply(e,[this].concat(d)),n=!a||"object"!==p(a)&&"function"!=typeof a?y(o):a,i=y(y(n)),s=function(e){var t=n.props.inviteQueue;if(!t)return null;var o={text:l.a._("Add","Add board collaborator invite"),color:"red",size:"sm"};return t&&t[e]&&(o.text=l.a._("Remove","Remove a board collaborator invite"),o.color="gray"),r.a.createElement(f.c,o)},(c="renderInviteButton")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,o["Component"]),n=t,(a=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.isHovering&&e.isHovering?this.props.onHoverStart():this.props.isHovering&&!e.isHovering&&this.props.onHoverEnd()}},{key:"render",value:function(){var e=this.props,t=e.is_pinner?l.a._("On Pinterest"):e.email?e.email:"facebook_non_pinner"===e.type?l.a._("Facebook"):"gplus_non_pinner"===e.type?l.a._("Google"):l.a._("Enter an email address");return r.a.createElement("a",Object.assign({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),r.a.createElement(f.b,{position:"relative"},e.send_pin_image?r.a.createElement("span",{className:"typeaheadImg"},r.a.createElement("img",{alt:"",src:e.send_pin_image})):null,r.a.createElement("p",{className:c()("typeaheadName",{hasImage:e.send_pin_image})},e.label),r.a.createElement("div",{className:"titleWrapper"},r.a.createElement("i",{className:c()("titleIcon",{isPinner:e.is_pinner},{isFacebook:"facebook_non_pinner"===e.type},{isGplus:"gplus_non_pinner"===e.type})}),r.a.createElement("p",{className:"title"},t)),r.a.createElement(f.b,{top:!0,right:!0,position:"absolute",width:90},this.renderInviteButton(e.id))))}}])&&m(n.prototype,a),i&&m(n,i),t}(),g=Object(d.a)(v),_=n("TYRv"),w=n("+pqy");function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=_.default.FACEBOOK,S=_.default.GPLUS,C=_.default.TWITTER,k=_.default.YAHOO;function x(e){var t,n=e.network,o=(E(t={},O,l.a._("Find friends from Facebook")),E(t,S,l.a._("Find friends from Google+")),E(t,C,l.a._("Find friends from Twitter")),E(t,k,l.a._("Find friends from Yahoo")),t);return r.a.createElement("div",{className:"socialConnect",role:"listitem"},r.a.createElement(f.P,{onTouch:function(){return function(e){w.a.instance().handleConnect(e,!0,{})}(n)},fullWidth:!1},r.a.createElement("div",{className:"socialConnectItem"},r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:c()("icon","socialConnect-".concat(n))},r.a.createElement("em",null))),r.a.createElement("div",{className:"right"},r.a.createElement("h4",{className:"title"},o[n])))))}var I=n("vBbO"),T=n("4+0X"),j=n("VSY/"),P=n("NmcB"),R=n("0Wmr");function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=[_.default.FACEBOOK,_.default.TWITTER,_.default.GPLUS],B=function(e){function t(){var e,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return o=this,a=(e=L(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==N(a)&&"function"!=typeof a?D(o):a,H(D(D(n)),"state",{networks:void 0!==n.props.viewer?n.props.viewer.socialNetwork:null,open:!1,typeaheadSuggestions:[]}),H(D(D(n)),"onUserInviteClick",function(e){var t=e.id,o=e.full_name,r=n.props,a=r.boardId,i=r.onInviteItemClick;a?i(Object(R.d)(a,[t]),{type:"user",userName:o}):i(e,!0)}),H(D(D(n)),"handleBodyClick",function(e){n._results&&!n._results===e.target&&n.setState({open:!1})}),H(D(D(n)),"handleTypeaheadSuggestionsChange",function(e){var t=n.props.viewer;n.setState({typeaheadSuggestions:(e||[]).filter(function(e){return e.id!==t.id})})}),H(D(D(n)),"handleOnEmailInviteClick",function(){var e=n.props,t=e.boardId,o=e.onInviteItemClick,r=e.value;t&&void 0!==r?o(Object(R.c)(t,[r]),{type:"email",email:r}):o(r,!1)}),H(D(D(n)),"subscriber",T.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,o){n.setState({networks:Object(s.a)(o)})})),H(D(D(n)),"logTypeaheadInput",function(e){Object(P.a)(4113,{component:13029,element:1043,entered_query:e})}),H(D(D(n)),"logSearchContactItemClick",function(e){var t=n.props.value;Object(P.a)(101,{component:13029,element:1044,entered_query:t,result_index:e})}),H(D(D(n)),"renderResultItems",function(){var e=n.props,t=e.changeOnTextHover,o=e.inviteQueue,a=e.isWebMessagingRedesignExpEnabled,i=c()("Typeahead","userSelect",{open:n.state.open},{webInboxRedesign:a}),s=n.state.typeaheadSuggestions.map(function(e,a){return r.a.createElement(g,Object.assign({key:a,onClick:function(){n.onUserInviteClick(e),n.logSearchContactItemClick(a)},onHoverEnd:function(){return t?n.restoreTextFieldValue():null},onHoverStart:function(){return t?n.forceTextFieldValue(e.label):null},inviteQueue:o},e))}).concat(n.getStaticItems()).map(function(e,t){return r.a.createElement("li",{key:t},e)}),l={overflow:"visible",zIndex:1e3,marginTop:a?8:4,border:a?"1px solid #dadada":null,borderTop:"none"};return r.a.createElement("div",{className:i,ref:function(e){n._results=e},style:l},r.a.createElement("ul",null,s))}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;["mousedown","touchstart"].forEach(function(t){document.addEventListener(t,e.handleBodyClick)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.setState({open:t.length>0})}},{key:"componentWillUnmount",value:function(){var e=this;["mousedown","touchstart"].forEach(function(t){document.removeEventListener(t,e.handleBodyClick)}),this.subscriber.unsubscribe()}},{key:"getStaticItems",value:function(){return A(this.getEmailItems()).concat(A(this.getSocialItems(this.state.networks)))}},{key:"getEmailItems",value:function(){var e=this.props.value||"";return[r.a.createElement(u.a,{email:e,isValid:Object(j.g)(e),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]}},{key:"getSocialItems",value:function(e){return M.filter(function(t){return!e||!1===e[t].connected}).map(function(e,t){return r.a.createElement(x,{key:"socialConnect-".concat(e),network:e})})}},{key:"forceTextFieldValue",value:function(e){this.props.value&&(this.previousValue=this.props.value),this.props.onChange(e)}},{key:"restoreTextFieldValue",value:function(){this.props.onChange(this.previousValue),delete this.previousValue}},{key:"render",value:function(){var e=this,t=this.props,n=t.boardId,o=t.className,a=t.onChange,i=t.onKeyDown,s=t.showInputPlaceholder,u=t.value,d=t.isWebMessagingRedesignExpEnabled,p=n?{board:n}:null,m=l.a._("Enter name or email","search");return r.a.createElement(I.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:p,value:u||""},r.a.createElement("div",{className:c()(o,"reactSocialTypeahead")},r.a.createElement("div",{className:c()("TypeaheadField","userSelect","inputContainer","socialInboxTypeahead",{webInboxRedesign:d})},r.a.createElement(f.M,{id:"collaboratorInviterTypeahead",onChange:function(t){var n=t.value;a(n),e.logTypeaheadInput(n)},onKeyDown:i,placeholder:s?m:"",value:u})),this.renderResultItems()))}}])&&F(n.prototype,a),i&&F(n,i),t}();H(B,"defaultProps",{changeOnTextHover:!1,onKeyDown:function(){},showInputPlaceholder:!0,value:""});t.a=Object(a.connect)(function(e){return{viewer:e.viewer}})(B)},TYRv:function(e,t,n){"use strict";n.r(t);var o,r=n("GGL+"),a=n.n(r),i=n("POeB"),c=n("/TEi"),s=n("Qo1m"),l=n("D+W/"),u=n("ggpB"),d={scope:"profile email",client_id:l.a.GEN.templateConst.settings.GPLUS_CLIENT_ID,app_package_name:l.a.GEN.templateConst.settings.GPLUS_APP_PACKAGE_NAME,access_type:"offline",cookie_policy:"single_host_origin"},f=function(e){return Object(u.a)("unauth_web.gapi_auth2_load.success"),e()},p=function(e){Object(u.a)("unauth_web.init_google.sdk.".concat(e))},m=function(){return new Promise(function(e,t){p("start"),window.gapi.auth2?(p("exists"),window.gapi.auth2.init(d).then(function(){return f(e)})):(p("load"),window.gapi.load("auth2",{callback:function(){p("load_success"),window.gapi.auth2.init(d).then(function(){return f(e)})},onerror:function(){p("load_error"),t()},timeout:15e3,ontimeout:function(){p("load_timeout"),t()}}))})},h=n("GrJN"),b=n("aqOH");function y(){}Object.assign(y.prototype,a.a),Object.assign(y.prototype,{connect:function(e,t){var o=this;(t=Object.assign({},{success:function(){},error:function(){},complete:function(){}},t)).rerequest_facebook_email?n.e("FacebookCommon").then(n.bind(null,"bWet")).then(function(e){e.default.ensureInit(function(e){e.login(function(e){var n,o,r=e.authResponse;r&&(n=(n=r.grantedScopes)?n.split(","):[],o=r.userID);var a=n.find(function(e){return"email"===e}),i={id:o};"connected"===e.status&&a?t.success(i):t.error(i),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},b.default)}):"gplus"===e?c.a.get(function(e){m().then(function(){e.auth2.getAuthInstance().grantOfflineAccess().then(function(e){t.success({one_time_code:e.code,redirect_uri:"postmessage"})}).catch(function(e){t.error(e)})})}):n.e("FacebookDialogCommon").then(n.bind(null,"H++a")).then(function(n){var r=n.default.getWindowOptions(),a=window.open("/connect/"+e+"/","",r);if(!a)return i.default.showError(s.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});var c=h.a.setInterval(function(){a.closed&&(clearInterval(c),o.handleComplete({network:e,error_message:"Window closed."}))},1e3);o.once("connect:"+e,function(e){clearInterval(c),e.error_message?t.error(e):t.success(e),t.complete()})})},complete:function(e){this.handleComplete(e)},handleComplete:function(e){var t="connect:"+e.network;if("facebook"===e.network){var n=e.id;n&&"string"!=typeof n&&(e.error_message="Facebook id must be of string type")}this.trigger(t,e)}}),Object.assign(y,{instance:function(){return o||(o=new y),o},FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy"}),window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&y.instance().complete(e.data)});t.default=y},XD26:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),a=n("Y7oc"),i=n("D+W/"),c=n("oKGc"),s=n("Qo1m"),l=n("iJ35"),u=n("LCmp"),d=n("+U6O"),f="Uploaded by user";function p(e){var t=e.pin,n=e.onRemove,o=t.id,a=t.grid_description,i=void 0===a?"":a,c=t.dominant_color,p=t.domain,m=void 0===p?f:p,h=t&&t.images?t.images["474x"]||t.images["736x"]||t.images.orig:{};return r.a.createElement(d.b,{height:80,display:"flex",alignItems:"center",marginLeft:2,color:"white"},r.a.createElement(l.b,{to:"/pin/".concat(o,"/")},r.a.createElement(d.u,{shape:"rounded",wash:!0,height:64,width:64},r.a.createElement(d.p,{alt:i,color:c,src:h.url,naturalHeight:h.height,naturalWidth:h.width,fit:"cover"}))),r.a.createElement(d.b,{paddingX:2,flex:"grow",alignSelf:"start",paddingY:2},r.a.createElement(d.b,null,r.a.createElement(l.b,{to:"/pin/".concat(o,"/")},r.a.createElement(d.K,{size:"xs",bold:!0},Object(u.a)(i)))),r.a.createElement(d.b,{paddingY:1},r.a.createElement(d.K,{size:"xs",color:"gray"},m.trim()===f?s.a._("Uploaded by user","default domain for the pin"):m))),r.a.createElement(d.b,{alignSelf:"start",paddingX:1,paddingY:1},r.a.createElement(d.o,{accessibilityLabel:"",size:"xs",icon:"cancel",onClick:n})))}var m=n("AdUJ"),h=n("JD0j"),b=n("DLN1");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function t(){var e,n,o,r,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return o=this,n=!(r=(e=g(t)).call.apply(e,[this].concat(l)))||"object"!==y(r)&&"function"!=typeof r?w(o):r,a=w(w(n)),c={slideUp:!1},(i="state")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r.a.PureComponent),n=t,(o=[{key:"componentDidMount",value:function(){this.setState({slideUp:!0})}},{key:"render",value:function(){var e=this.props,t=e.conversationId,n=void 0===t?"":t,o=e.onSelect,a=e.onDismiss,i=this.state.slideUp;return r.a.createElement(m.a.Consumer,null,function(e){return r.a.createElement(d.H,{top:0},r.a.createElement(d.b,{height:"calc(100vh - ".concat(e||b.a,"px)"),width:"100%",dangerouslySetInlineStyle:{__style:{background:"rgba(85, 85, 85, 0.9)"}}},r.a.createElement(d.b,{position:"absolute",width:"100%",height:i?"75%":0,color:"white",bottom:!0,dangerouslySetInlineStyle:{__style:{transition:"height .25s cubic-bezier(0.66, 0.025, 0.33, 0.975)"}}},r.a.createElement(h.a,{conversationId:n,onSelect:o,onDismiss:a,height:"100%"}))))})}}])&&v(n.prototype,o),a&&v(n,a),t}(),O=n("NmcB");function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){j(e,t,n[t])})}return e}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return F});var P=1e3,R=19,N=49,A={paddingRight:8,fontSize:16,caretColor:"black"},F=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return o=this,r=(e=x(t)).call.apply(e,[this].concat(c)),n=!r||"object"!==S(r)&&"function"!=typeof r?T(o):r,j(T(T(n)),"state",{hasFocus:!1,textValue:"",isSendPinModalOpen:!1,pinId:null,moreThanOneLineOfText:!1,moreThanThreeLinesOfText:!1}),j(T(T(n)),"handleSubmit",function(){var e=n.props,t=e.onSubmit,o=e.onExceedMessageLimit,r=n.state,a=r.pinId,i=r.textValue.trim();i.length<=P?(""!==i||a)&&(t({text:i,pinId:a}),n.setState({textValue:"",pinId:null,moreThanOneLineOfText:!1,moreThanThreeLinesOfText:!1})):o()}),j(T(T(n)),"handleAddPinClick",function(){Object(O.a)(101,{view:42,viewParameter:204,element:10598}),n.setState({isSendPinModalOpen:!n.state.isSendPinModalOpen})}),j(T(T(n)),"handleSendPinDismiss",function(){n.setState({isSendPinModalOpen:!1})}),j(T(T(n)),"handleSelectPin",function(e){n.setState({pinId:e,isSendPinModalOpen:!1})}),j(T(T(n)),"handleRemovePin",function(){n.setState({pinId:null})}),j(T(T(n)),"handleHeartClick",function(){n.props.onSubmit({text:"❤️"}),Object(O.a)(101,{element:10597})}),j(T(T(n)),"handleFocus",function(){n.setState({hasFocus:!0})}),j(T(T(n)),"handleBlur",function(){n.setState({hasFocus:!1})}),j(T(T(n)),"handleKeyDown",function(e){e.keyCode===i.a.KeyCode.ENTER&&(n.handleSubmit(),e.preventDefault(),e.stopPropagation())}),j(T(T(n)),"onInputChange",function(e){var t=e.value,o=n.textAreaRef;n.setState({textValue:t,moreThanThreeLinesOfText:null!==o&&o instanceof HTMLDivElement&&o.clientHeight>N,moreThanOneLineOfText:null!==o&&o instanceof HTMLDivElement&&o.clientHeight>R})}),j(T(T(n)),"setTextAreaRef",function(e){n.textAreaRef=e}),n}var n,l,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,o["Component"]),n=t,(l=[{key:"componentDidMount",value:function(){this.props.shouldFocus&&this.textAreaRef&&this.textAreaRef.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.shouldFocus;t&&e.shouldFocus!==t&&this.textAreaRef&&this.textAreaRef.focus()}},{key:"render",value:function(){var e=this,t=this.props.conversationId,n=this.state,o=n.pinId,i=n.textValue,l=n.moreThanThreeLinesOfText,u=n.isSendPinModalOpen,f=i.trim(),m=this.state.hasFocus?{boxShadow:"rgba(0, 132, 255, 0.5) 0px 0px 0px 4px"}:{border:"#dadada solid 1px"},h=l?"0 4px 8px 4px":"4px 8px 4px 12px",b=!o&&!f,y=f.length<=P;return r.a.createElement(d.b,null,o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(a.a,{mapStateToProps:function(e){return{pin:e.pins[o]}}},function(t){var n=t.pin;return r.a.createElement(p,{pin:n,onRemove:e.handleRemovePin})}),r.a.createElement(d.j,null)),u?r.a.createElement(E,{conversationId:t,onSelect:this.handleSelectPin,onDismiss:this.handleSendPinDismiss}):r.a.createElement(d.b,{display:"flex",alignItems:"center",width:"100%",justifyContent:"around",dangerouslySetInlineStyle:{__style:{paddingLeft:"12px",paddingBottom:"4px"}}},r.a.createElement(d.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:C({},m,{padding:h})},minHeight:50,shape:"rounded",width:"100%"},r.a.createElement(d.b,{width:"100%",display:"flex",position:"relative",onKeyDown:this.handleKeyDown},r.a.createElement(c.a,{grow:!0,id:"messageDraft",onChange:this.onInputChange,placeholder:s.a._("Add a message","Placeholder text for adding message in conversation"),size:"sm",value:i,maxHeight:54,onFocus:this.handleFocus,onBlur:this.handleBlur,style:A,ref:this.setTextAreaRef})),r.a.createElement(d.b,{right:!0},r.a.createElement(d.o,{onClick:this.handleAddPinClick,icon:"add-pin",iconColor:"gray",size:"md",disabled:!t,accessibilityLabel:s.a._("Add Pin to conversation","Icon to add Pin to conversation")}))),r.a.createElement(d.b,{dangerouslySetInlineStyle:{__style:{marginLeft:"6px",marginRight:"6px"}}},b?r.a.createElement(d.o,{onClick:this.handleHeartClick,icon:"heart",iconColor:"gray",size:"md",accessibilityLabel:s.a._("Add heart emoji to conversation","Icon to add heart emoji to conversation")}):r.a.createElement(d.o,{onClick:this.handleSubmit,icon:"send",iconColor:"red",size:"md",disabled:!y,accessibilityLabel:s.a._("Send message to conversation","Icon to send to conversation")}))))}}])&&k(n.prototype,l),u&&k(n,u),t}()},axJV:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return f});var r="facebook",a="twitter",i="google",c="youtube",s="gplus",l="microsoft",u="etsy",d="instagram";function f(e){var t;return o(t={},r,{connected:e.connected_to_facebook||!1}),o(t,i,{connected:e.connected_to_google||!1}),o(t,c,{connected:e.connected_to_youtube||!1}),o(t,s,{connected:!!e.gplus_url,url:e.gplus_url}),o(t,l,{connected:e.connected_to_microsoft||!1}),o(t,a,{connected:!!e.twitter_url,url:e.twitter_url}),o(t,u,{connected:e.connected_to_etsy||!1}),o(t,d,{connected:e.connected_to_instagram||!1}),t}},eRYL:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n("GyhR"),r=n("+U6O");function a(e){var t=e.htmlFor,n=e.errorMessage;return o.createElement(r.q,{htmlFor:t},o.createElement(r.b,{marginTop:1},o.createElement(r.K,{color:"red",size:"sm"},n)))}},fdy7:function(e,t,n){},oKGc:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),a=(n("fdy7"),n("PNko")),i=n.n(a),c=n("eRYL"),s=n("+U6O");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=d(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==l(r)&&"function"!=typeof r?p(o):r,m(p(p(n)),"setTextAreaRef",function(e){var t=n.props.forwardedRef;n.textArea=e,t&&t(e)}),m(p(p(n)),"setTextAreaHeight",function(e){var t=n.props.maxHeight;e.style.height="auto",e.style.height="".concat(Math.min(e.scrollHeight,t),"px")}),m(p(p(n)),"handleFocus",function(){var e=n.props.onFocus;e&&e()}),m(p(p(n)),"handleBlur",function(){var e=n.props.onBlur;e&&e()}),m(p(p(n)),"handleChange",function(e){n.props.onChange({event:e,value:e.target.value})}),m(p(p(n)),"handleInput",function(e){n.setTextAreaHeight(e.currentTarget)}),n}var n,a,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.textArea&&this.setTextAreaHeight(this.textArea)}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.textArea&&this.setTextAreaHeight(this.textArea)}},{key:"render",value:function(){var e=this.props,t=e.bold,n=e.disabled,o=e.errorMessage,a=e.grow,l=e.id,u=e.maxLength,d=e.placeholder,f=e.size,p=e.value,m=e.style;return r.a.createElement(s.b,{display:"flex",direction:"column",flex:a?"grow":"shrink"},r.a.createElement("textarea",{className:i()("ExpandingTextArea__textArea",{ExpandingTextArea__bold:t,ExpandingTextArea__disabled:n,ExpandingTextArea__enabled:!n,ExpandingTextArea__grow:a,ExpandingTextArea__large:"lg"===f,ExpandingTextArea__medium:"md"===f,ExpandingTextArea__small:"sm"===f}),disabled:n,id:l,maxLength:u,onChange:this.handleChange,onInput:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleBlur,placeholder:d,ref:this.setTextAreaRef,style:m,rows:1,value:p}),!!o&&r.a.createElement(c.a,{errorMessage:o,htmlFor:l}))}}])&&u(n.prototype,a),h&&u(n,h),t}();m(h,"defaultProps",{bold:!1,disabled:!1,grow:!0,maxHeight:1/0,size:"md"}),t.a=Object(o.forwardRef)(function(e,t){return r.a.createElement(h,Object.assign({},e,{forwardedRef:t}))})},tsSC:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n("GyhR");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=32,d=100,f=null,p=!1,m=[],h=function(){f&&clearTimeout(f),p=!0,f=setTimeout(function(){p=!1},d)},b=function(e){0===m.length&&window.addEventListener("scroll",h),m.push(e)},y=function(e){var t=m.indexOf(e);m.splice(t,1),0===m.length&&window.removeEventListener("scroll",h)};function v(e){return function(t){function n(){var e,t,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return o=this,a=(e=i(n)).call.apply(e,[this].concat(u)),t=!a||"object"!==r(a)&&"function"!=typeof a?s(o):a,l(s(s(t)),"state",{isHovering:!1}),l(s(s(t)),"handlers",{onMouseOver:function(){return t._setHover(!0)},onMouseLeave:function(){return t._setHover(!1)}}),t}var f,m,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,o["Component"]),f=n,(m=[{key:"componentDidMount",value:function(){b(this)}},{key:"componentWillUnmount",value:function(){this.hoverTimer&&clearTimeout(this.hoverTimer),y(this)}},{key:"_setHover",value:function(e){var t=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=e&&p?setTimeout(function(){return t._setHover(e)},d):setTimeout(function(){e!==t.state.isHovering&&t.setState({isHovering:e})},u)}},{key:"render",value:function(){return o.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}])&&a(f.prototype,m),h&&a(f,h),n}()}},y9IQ:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("GyhR"),r=n("PNko"),a=n.n(r),i=n("Qo1m"),c=(n("hvnN"),n("VSY/"));function s(e){var t=e.email,n=e.isValid,r=e.onClick,s=e.showSendEmailText,l=n?o.createElement("div",{className:"icon"},t[0].toUpperCase()):o.createElement("div",{className:a()("icon","typingEmail")},o.createElement("em",null)),u=n?i.a._("Click to send!"):i.a._("Keep typing!"),d=s?Object(c.i)(i.a._("Email {{ email }}"),{email:t}):Object(c.i)(i.a._("Invite {{ email }}"),{email:t});return o.createElement("div",{className:a()("sendToEmail",{unclickable:!n})},o.createElement("a",{className:"selectableEmailItem",onClick:function(){n&&r()},role:"button"},o.createElement("div",{className:"left"},l),o.createElement("div",{className:"right"},o.createElement("h4",{className:"title"},d),o.createElement("p",{className:"subtitle"},u))))}},z1WJ:function(e,t,n){"use strict";n.r(t);var o=n("GyhR"),r=n.n(o),a=n("Ivf5"),i=n("Qo1m"),c=n("E56J"),s=n("XD26"),l=n("ePT2"),u=n("hXwk"),d=(n("hvnN"),n("+U6O")),f=function(e,t){var n=t.emails,o=t.users;return r.a.createElement("div",null,n&&n.length>0?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&0!==e.length){var t=e[0];return r.a.createElement("div",{className:"contactWrapper"},r.a.createElement(u.a,{emails:[t],size:"small"}),r.a.createElement("div",{className:"contactTextInfo"},r.a.createElement("span",{className:"contactName"},t),r.a.createElement("span",{className:"contactDescription"},i.a._("Email friend","on selected contact list"))))}}(n):function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t[0].id===e?t[1]:t[0],o=n.full_name;return r.a.createElement("div",{className:"contactWrapper"},r.a.createElement(u.a,{size:"small",users:[n]}),r.a.createElement("div",{className:"contactTextInfo"},r.a.createElement("span",{className:"contactName"},o),r.a.createElement("span",{className:"contactDescription"},i.a._("On Pinterest","info about a contact"))))}(o))};function p(e){var t=e.contactItem,n=e.currentUserID,o=e.conversationItem,a=e.handleContactWrapperClick,c=e.isSelected,s=e.isUser,l=r.a.createElement(d.o,{accessibilityLabel:i.a._("selected checkmark"),bgColor:"transparentDarkGray",icon:"check",iconColor:"white",size:"xs"});return r.a.createElement("a",{className:"conversationContactContainer",key:o.id,onClick:function(){return a(s,t)},onKeyDown:function(){},role:"button",tabIndex:0},f(n,o),c?l:null)}p.defaultProps={isSelected:!1};var m=n("SOSk");function h(e){var t=e.onClickRemove,n=e.tokenizedItems,r=e.isWebMessagingRedesignExpEnabled,a=r?340:310,c=r?150:136;return o.createElement(d.b,{display:"flex",direction:"row",maxWidth:a,maxHeight:100,wrap:!0,dangerouslySetInlineStyle:{__style:{zIndex:1e3,overflowX:"hidden",overflowY:"auto"}}},n.map(function(e,n){return o.createElement(d.b,{color:"lightGray",shape:"pill",display:"flex",alignItems:"center",direction:"row",justifyContent:"between",width:c,paddingY:1,margin:1,key:"string"!=typeof e?e.id:e},o.createElement(d.b,{maxWidth:100,marginLeft:3},"string"!=typeof e?o.createElement(d.K,{truncate:!0},e.full_name):o.createElement(d.K,{truncate:!0},e)),o.createElement(d.o,{accessibilityLabel:i.a._("Cancel"),bgColor:"lightGray",icon:"cancel",iconColor:"darkGray",onClick:function(){return t(n)},size:"xs"}))}))}var b=n("NmcB"),y=n("spTd");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"ComposeNewMessage",function(){return x});var S=8,C=13;function k(e,t,n,o){return{full_name:n,first_name:o,id:e,username:t}}var x=function(e){function t(){var e,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),f=0;f<s;f++)u[f]=arguments[f];return o=this,a=(e=_(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==v(a)&&"function"!=typeof a?E(o):a,O(E(E(n)),"state",{contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:"",composerIsFocused:!1}),O(E(E(n)),"onHandleContactClick",function(e,t){var o=n.state,r=o.selectedEmails,a=o.selectedUsers,i=e?a:r,c=e?t.id:t.username,s=i[c];i[c]=!s,s?n.removeTokenItem(t):n.addTokenItem(t)}),O(E(E(n)),"getSelectedEmails",function(){var e=n.state.selectedEmails;return Object.keys(e).filter(function(t){return e[t]})}),O(E(E(n)),"getSelectedUsers",function(){var e=n.state.selectedUsers;return Object.keys(e).filter(function(t){return e[t]})}),O(E(E(n)),"getContactItem",function(e,t,n){var o=e.emails,r=e.users;return n&&r?r[0].id===t?r[1]:r[0]:o[0]}),O(E(E(n)),"handleTypeaheadKeyDown",function(e){var t=n.state,o=t.contactCounter,r=t.selectedEmails,a=t.selectedUsers,i=t.tokenizedItems,c=t.value;if(e.keyCode===S&&o>0&&!c){var s=i.pop();(!!s.id||""!==s.id?a:r)[s.id||s.username]=!1,n.setState({contactCounter:o-1,tokenizedItems:i})}else e.keyCode===C&&(n.handleComposerFocus(),e.preventDefault())}),O(E(E(n)),"handleInviteItemClick",function(e,t){var o=n.state,r=o.selectedUsers,a=o.selectedEmails,i=t?r:a,c=e.id||e;if(!i[c]){i[c]=!0;var s=t?k(e.id,e.username,e.full_name,e.first_name):k("",c,c,c);n.addTokenItem(s)}}),O(E(E(n)),"handleRemoveItem",function(e){var t=n.state.tokenizedItems[e];n.removeTokenItem(t)}),O(E(E(n)),"logSendMessage",function(e){Object(b.a)(180,{view:42,viewParameter:201,component:55,conversation_id:e})}),O(E(E(n)),"handleSendMessage",function(e){var t=n.getSelectedEmails(),o=n.getSelectedUsers(),r=n.props.dispatch;l.a.create("ConversationsResource",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){O(e,t,n[t])})}return e}({user_ids:o,emails:t},e)).callCreate().then(function(t){var o=t&&t.resource_response.data;r(Object(y.c)(o)),r(Object(y.h)(o.id)),r(Object(y.g)(o.id)),c.default.increment("web_messaging.compose_message",1,{action:e.text?"Create":"Send",message_type:e.pinId?"Pin":"Text"}),n.logSendMessage(o.id)})}),O(E(E(n)),"handleCreateConversation",function(){n.handleSendMessage({text:null})}),O(E(E(n)),"addTokenItem",function(e){var t=n.state,o=t.contactCounter,r=t.tokenizedItems;n.setState({contactCounter:o+1,tokenizedItems:r.concat([e]),value:""})}),O(E(E(n)),"removeTokenItem",function(e){var t=n.state,o=t.contactCounter,r=t.tokenizedItems,a=t.selectedUsers,i=t.selectedEmails,c=!!e.id||""!==e.id,s=e.id||e.username;(c?a:i)[s]=!1,c?n.setState({contactCounter:o-1,tokenizedItems:r.filter(function(e){return e.id!==s})}):n.setState({contactCounter:o-1,tokenizedItems:r.filter(function(e){return e.username!==s})})}),O(E(E(n)),"renderSendMessageButton",function(){return r.a.createElement(d.b,{margin:-2},r.a.createElement(d.c,{color:"white",onClick:n.handleCreateConversation,inline:!0,text:i.a._("Next","open the new chat"),size:"sm",accessibilityLabel:i.a._("Button to start conversation","accessibility label for next button in conversation")}))}),O(E(E(n)),"renderCancelMessageButton",function(){return r.a.createElement(d.b,{margin:-2},r.a.createElement(d.c,{color:"white",inline:!0,onClick:n.handleCancel,text:i.a._("Cancel","cancel new message view"),size:"sm",accessibilityLabel:i.a._("Cancel to new conversation flow","accessibility label to cancel new conversation flow")}))}),O(E(E(n)),"handleCancel",function(){var e=n.props.handleCancelNewMessageClick;c.default.increment("web_messaging.compose_message",1,{action:"Cancel"}),e&&e()}),O(E(E(n)),"handleComposerFocus",function(){c.default.increment("web_messaging.compose_message",1,{action:"Focus"}),n.setState({composerIsFocused:!0})}),O(E(E(n)),"handleComposerBlur",function(){n.setState({composerIsFocused:!1})}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.conversationItems,o=t.viewerId,a=t.isWebMessagingRedesignExpEnabled,c=this.state,l=c.contactCounter,u=c.selectedUsers,f=c.selectedEmails,b=c.value,y=c.tokenizedItems,v=c.composerIsFocused,g=new Set,_=void 0!==this.props.onExceedMessageLimit?this.props.onExceedMessageLimit:function(){},w=void 0!==n?n.map(function(t,n){var a=t.emails,i=t.users;a||(a=[]),i||(i=[]);var c=i.length+a.length;if(c>0&&c<=2){var s=0===a.length,l=e.getContactItem(t,o,s);if(l){var m=l.id||l.username;if(!g.has(m))return g.add(m),r.a.createElement(d.d,{key:n},r.a.createElement(p,{className:"conversationContactContainer",contactItem:l,conversationItem:t,currentUserID:o,handleContactWrapperClick:e.onHandleContactClick,isSelected:u[m]||f[m],isUser:s}))}}return null}):null,E=a?"#dadada solid 1px":"#efefef solid 2px",O=a?r.a.createElement(d.b,{shape:"roundedBottom",overflow:"scrollY",maxHeight:364,dangerouslySetInlineStyle:{__style:{border:E,margin:"-1px 16px 0"}}},w):r.a.createElement(d.b,{dangerouslySetInlineStyle:{__style:{margin:"8px 8px 0 8px"}}}," ",w," ");return r.a.createElement(d.b,null,a?null:r.a.createElement(d.b,{display:"flex",justifyContent:"between",padding:3},r.a.createElement(d.K,{size:"lg",bold:!0},i.a._("New message","title for composing new message")),l>0?this.renderSendMessageButton():this.renderCancelMessageButton()),r.a.createElement(d.b,{display:"flex",marginLeft:a?4:2,marginRight:a?4:2,shape:a?"roundedTop":"rounded",dangerouslySetInlineStyle:{__style:{border:E,paddingLeft:3}}},r.a.createElement(d.b,{display:"flex",alignItems:"center",marginRight:2,paddingY:1,dangerouslySetInlineStyle:{__style:a?{paddingLeft:4}:{}}},r.a.createElement(d.K,{size:"sm",bold:!0,color:"gray"},i.a._("To:","Text field to type message recipient names"))),r.a.createElement(d.b,{display:"flex",position:"relative",flex:"grow",wrap:!0,direction:"column",paddingY:a?2:0},r.a.createElement(h,{tokenizedItems:y,onClickRemove:this.handleRemoveItem,isWebMessagingRedesignExpEnabled:a}),r.a.createElement(m.a,{changeOnTextHover:!1,className:"reactNewMessageTypeahead",onChange:function(t){return e.setState({value:t})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!0,value:b,isWebMessagingRedesignExpEnabled:a,key:l+1}))),b||v?null:O,a&&r.a.createElement(d.b,{position:"absolute",bottom:!0,paddingY:3,width:"100%",dangerouslySetInlineStyle:{__style:{borderTop:E}},color:"white",onFocus:this.handleComposerFocus,onBlur:this.handleComposerBlur},r.a.createElement(s.a,{onSubmit:this.handleSendMessage,onExceedMessageLimit:_,shouldFocus:v})))}}])&&g(n.prototype,a),u&&g(n,u),t}();t.default=Object(a.connect)(function(e){return{viewerId:e.viewer.id}})(x)}}]);